[{"uri":"https://tunneeeee.github.io/Internship/vi/5-security-monitoring-and-response/1-logging-with-cloudwatch/","title":"Ghi log container v√†o CloudWatch v·ªõi Fluent Bit","tags":[],"description":"","content":"N·ªôi dung ch√≠nh T·ªïng quan Fluent Bit + CloudWatch Chu·∫©n b·ªã m√¥i tr∆∞·ªùng Tri·ªÉn khai Fluent Bit l√™n EKS C·∫•u h√¨nh CloudWatch Output Ki·ªÉm tra log tr√™n CloudWatch Troubleshooting Ghi ch√∫ \u0026amp; th·ª±c h√†nh m·ªü r·ªông T·ªïng quan Fluent Bit + CloudWatch Fluent Bit l√† m·ªôt tr√¨nh thu th·∫≠p v√† chuy·ªÉn ti·∫øp log nh·∫π, hi·ªáu qu·∫£ cao. Tr√™n EKS, n√≥ gi√∫p:\nThu th·∫≠p log t·ª´ t·∫•t c·∫£ container trong cluster Chuy·ªÉn ƒë·ªïi v√† enrichment log v·ªõi metadata Kubernetes G·ª≠i log ƒë·∫øn CloudWatch Logs v·ªõi format JSON chu·∫©n H·ªó tr·ª£ filtering v√† routing log theo namespace, labels ∆Øu ƒëi·ªÉm:\nG·ªçn nh·∫π: Ch·ªâ ~15MB memory footprint Hi·ªáu su·∫•t cao: X·ª≠ l√Ω h√†ng ngh√¨n events/gi√¢y Linh ho·∫°t: H·ªó tr·ª£ nhi·ªÅu ƒë√≠ch ƒë·∫øn (CloudWatch, Elasticsearch, Kafka, S3\u0026hellip;) Cloud-native: T√≠ch h·ª£p s·∫µn v·ªõi Kubernetes Chu·∫©n b·ªã m√¥i tr∆∞·ªùng Ki·ªÉm tra EKS cluster # Ki·ªÉm tra cluster status kubectl cluster-info # Ki·ªÉm tra nodes kubectl get nodes # T·∫°o namespace logging kubectl create namespace logging T·∫°o test application (optional) # T·∫°o log generator ƒë·ªÉ test kubectl create deployment log-generator --image=busybox --namespace=default kubectl patch deployment log-generator -p \u0026#39;{\u0026#34;spec\u0026#34;:{\u0026#34;template\u0026#34;:{\u0026#34;spec\u0026#34;:{\u0026#34;containers\u0026#34;:[{\u0026#34;name\u0026#34;:\u0026#34;busybox\u0026#34;,\u0026#34;command\u0026#34;:[\u0026#34;sh\u0026#34;,\u0026#34;-c\u0026#34;,\u0026#34;while true; do echo \\\u0026#34;[$(date)] Test log message #$((i++)) - This is a test log for CloudWatch\\\u0026#34;; sleep 10; done\u0026#34;],\u0026#34;image\u0026#34;:\u0026#34;busybox\u0026#34;}]}}}}\u0026#39; Tri·ªÉn khai Fluent Bit l√™n EKS B∆∞·ªõc 1: T·∫°o IAM role cho Fluent Bit T·∫°o IAM Policy v·ªõi quy·ªÅn ghi CloudWatch Logs:\n{ \u0026#34;Version\u0026#34;: \u0026#34;2012-10-17\u0026#34;, \u0026#34;Statement\u0026#34;: [ { \u0026#34;Effect\u0026#34;: \u0026#34;Allow\u0026#34;, \u0026#34;Action\u0026#34;: [ \u0026#34;logs:PutLogEvents\u0026#34;, \u0026#34;logs:DescribeLogStreams\u0026#34;, \u0026#34;logs:DescribeLogGroups\u0026#34;, \u0026#34;logs:CreateLogStream\u0026#34;, \u0026#34;logs:CreateLogGroup\u0026#34; ], \u0026#34;Resource\u0026#34;: \u0026#34;*\u0026#34; } ] } T·∫°o IAM Role v√† g√°n policy:\n# T·∫°o trust policy cho IRSA cat \u0026gt; trust-policy.json \u0026lt;\u0026lt; EOF { \u0026#34;Version\u0026#34;: \u0026#34;2012-10-17\u0026#34;, \u0026#34;Statement\u0026#34;: [ { \u0026#34;Effect\u0026#34;: \u0026#34;Allow\u0026#34;, \u0026#34;Principal\u0026#34;: { \u0026#34;Federated\u0026#34;: \u0026#34;arn:aws:iam::YOUR_ACCOUNT_ID:oidc-provider/oidc.eks.ap-southeast-1.amazonaws.com/id/YOUR_OIDC_ID\u0026#34; }, \u0026#34;Action\u0026#34;: \u0026#34;sts:AssumeRoleWithWebIdentity\u0026#34;, \u0026#34;Condition\u0026#34;: { \u0026#34;StringEquals\u0026#34;: { \u0026#34;oidc.eks.ap-southeast-1.amazonaws.com/id/YOUR_OIDC_ID:sub\u0026#34;: \u0026#34;system:serviceaccount:logging:fluent-bit-sa\u0026#34; } } } ] } EOF # T·∫°o IAM Role aws iam create-role \\ --role-name FluentBitRole \\ --assume-role-policy-document file://trust-policy.json # G√°n policy aws iam attach-role-policy \\ --role-name FluentBitRole \\ --policy-arn arn:aws:iam::YOUR_ACCOUNT_ID:policy/FluentBitCloudWatchPolicy B∆∞·ªõc 2: C√†i Fluent Bit b·∫±ng Helm # Th√™m Fluent Bit Helm repository helm repo add fluent https://fluent.github.io/helm-charts helm repo update # C√†i ƒë·∫∑t Fluent Bit v·ªõi CloudWatch enabled helm install fluent-bit fluent/fluent-bit \\ --namespace logging \\ --create-namespace \\ --set serviceAccount.create=true \\ --set serviceAccount.name=fluent-bit-sa \\ --set serviceAccount.annotations.\u0026#34;eks\\.amazonaws\\.com/role-arn\u0026#34;=\u0026#34;arn:aws:iam::YOUR_ACCOUNT_ID:role/FluentBitRole\u0026#34; B∆∞·ªõc 3: Ki·ªÉm tra tr·∫°ng th√°i deployment # Ki·ªÉm tra pod status kubectl get pods -n logging # Xem logs c·ªßa Fluent Bit kubectl logs -n logging -l app.kubernetes.io/name=fluent-bit --tail=100 # Ki·ªÉm tra service account kubectl describe serviceaccount fluent-bit-sa -n logging C·∫•u h√¨nh CloudWatch Output T·∫°o ConfigMap cho Fluent Bit apiVersion: v1 kind: ConfigMap metadata: name: fluent-bit-config namespace: logging data: fluent-bit.conf: | [SERVICE] Flush 1 Log_Level info Daemon off Parsers_File parsers.conf HTTP_Server On HTTP_Listen 0.0.0.0 HTTP_Port 2020 [INPUT] Name tail Path /var/log/containers/*.log Parser docker Tag kube.* Refresh_Interval 5 Mem_Buf_Limit 50MB Skip_Long_Lines On [FILTER] Name kubernetes Match kube.* Kube_URL https://kubernetes.default.svc:443 Kube_CA_File /var/run/secrets/kubernetes.io/serviceaccount/ca.crt Kube_Token_File /var/run/secrets/kubernetes.io/serviceaccount/token Kube_Tag_Prefix kube.var.log.containers. Merge_Log On Keep_Log Off K8S-Logging.Parser On K8S-Logging.Exclude On [OUTPUT] Name cloudwatch_logs Match * region ap-southeast-1 log_group_name /aws/containerinsights/your-cluster-name/application log_stream_prefix fluent-bit- auto_create_group On log_retention_days 7 parsers.conf: | [PARSER] Name docker Format json Time_Key time Time_Format %Y-%m-%dT%H:%M:%S.%L Time_Keep On Apply configuration kubectl apply -f fluent-bit-config.yaml # Restart Fluent Bit ƒë·ªÉ load config m·ªõi kubectl rollout restart daemonset/fluent-bit -n logging Ki·ªÉm tra log tr√™n CloudWatch 1. Truy c·∫≠p CloudWatch Console M·ªü CloudWatch Console Ch·ªçn Log groups t·ª´ menu b√™n tr√°i T√¨m log group: /aws/containerinsights/your-cluster-name/application 2. Ki·ªÉm tra log streams # T·∫°o m·ªôt s·ªë test logs kubectl run test-pod --image=nginx --restart=Never kubectl logs test-pod # Ki·ªÉm tra logs c·ªßa demo2 namespace kubectl logs -n demo2 -l app=nginx --tail=10 kubectl logs -n demo2 -l app=backend --tail=10 3. Xem logs tr√™n CloudWatch V√≠ d·ª• log format tr√™n CloudWatch:\n{ \u0026#34;time\u0026#34;: \u0026#34;2025-07-16T05:39:39.654Z\u0026#34;, \u0026#34;stream\u0026#34;: \u0026#34;stdout\u0026#34;, \u0026#34;log\u0026#34;: \u0026#34;[Wed Jul 16 05:39:39 UTC 2025] Test log message #1251 - This is a test log for CloudWatch\u0026#34;, \u0026#34;kubernetes\u0026#34;: { \u0026#34;pod_name\u0026#34;: \u0026#34;nginx-5869d7778c-db2lm\u0026#34;, \u0026#34;namespace_name\u0026#34;: \u0026#34;demo2\u0026#34;, \u0026#34;container_name\u0026#34;: \u0026#34;nginx\u0026#34;, \u0026#34;labels\u0026#34;: { \u0026#34;app\u0026#34;: \u0026#34;nginx\u0026#34;, \u0026#34;version\u0026#34;: \u0026#34;v1.0\u0026#34; }, \u0026#34;host\u0026#34;: \u0026#34;ip-192-168-39-33.ap-southeast-1.compute.internal\u0026#34; } } 4. Filtering logs theo namespace Ch·ªâ xem logs c·ªßa demo2 namespace:\n# Th√™m filter trong Fluent Bit config [FILTER] Name grep Match kube.* Regex kubernetes.namespace_name demo2 [OUTPUT] Name cloudwatch_logs Match * region ap-southeast-1 log_group_name /aws/containerinsights/demo2-logs log_stream_prefix demo2- auto_create_group On Troubleshooting V·∫•n ƒë·ªÅ th∆∞·ªùng g·∫∑p v√† c√°ch kh·∫Øc ph·ª•c 1. Fluent Bit kh√¥ng start ƒë∆∞·ª£c:\n# Ki·ªÉm tra logs l·ªói kubectl logs -n logging -l app.kubernetes.io/name=fluent-bit # Ki·ªÉm tra permissions kubectl describe pod -n logging -l app.kubernetes.io/name=fluent-bit 2. Kh√¥ng th·∫•y logs tr√™n CloudWatch:\n# Ki·ªÉm tra AWS credentials kubectl exec -n logging deployment/fluent-bit -- env | grep AWS # Ki·ªÉm tra network connectivity kubectl exec -n logging deployment/fluent-bit -- nslookup logs.ap-southeast-1.amazonaws.com # Xem chi ti·∫øt logs c·ªßa Fluent Bit kubectl logs -n logging -l app.kubernetes.io/name=fluent-bit | grep -i \u0026#34;cloudwatch\\|error\u0026#34; 3. Log format kh√¥ng ƒë√∫ng:\n# Ki·ªÉm tra parser configuration kubectl get configmap fluent-bit-config -n logging -o yaml # Test parser locally kubectl exec -n logging deployment/fluent-bit -- fluent-bit --dry-run --config /fluent-bit/etc/fluent-bit.conf 4. L·ªói permissions:\n# Ki·ªÉm tra IAM role aws sts get-caller-identity # Ki·ªÉm tra service account annotation kubectl describe serviceaccount fluent-bit-sa -n logging | grep Annotations Debug commands h·ªØu √≠ch # Xem realtime logs kubectl logs -n logging -l app.kubernetes.io/name=fluent-bit -f # Ki·ªÉm tra metrics kubectl port-forward -n logging svc/fluent-bit 2020:2020 curl localhost:2020/api/v1/metrics # Xem c·∫•u h√¨nh hi·ªán t·∫°i kubectl exec -n logging deployment/fluent-bit -- cat /fluent-bit/etc/fluent-bit.conf Ghi ch√∫ \u0026amp; th·ª±c h√†nh m·ªü r·ªông T·ªëi ∆∞u h√≥a performance # TƒÉng buffer size cho high-volume logs [INPUT] Name tail Path /var/log/containers/*.log Mem_Buf_Limit 100MB Buffer_Max_Size 1MB Buffer_Chunk_Size 64KB Log routing theo environment # Route logs theo namespace [OUTPUT] Name cloudwatch_logs Match kube.var.log.containers.*production* log_group_name /aws/containerinsights/production-logs [OUTPUT] Name cloudwatch_logs Match kube.var.log.containers.*staging* log_group_name /aws/containerinsights/staging-logs Structured logging # Parse JSON logs [FILTER] Name parser Match kube.* Parser json Key_Name log Cost optimization # Gi·∫£m retention ƒë·ªÉ ti·∫øt ki·ªám chi ph√≠ [OUTPUT] Name cloudwatch_logs Match * log_retention_days 3 # Exclude debug logs [FILTER] Name grep Match * Exclude log (DEBUG|TRACE) Monitoring Fluent Bit # Enable metrics endpoint [SERVICE] HTTP_Server On HTTP_Listen 0.0.0.0 HTTP_Port 2020 # Prometheus metrics [OUTPUT] Name prometheus_exporter Match * Host 0.0.0.0 Port 2021 Alternative: OpenTelemetry Collector ƒê·ªëi v·ªõi h·ªá th·ªëng l·ªõn h∆°n, c√≥ th·ªÉ xem x√©t:\n# C√†i OpenTelemetry Operator kubectl apply -f https://github.com/open-telemetry/opentelemetry-operator/releases/latest/download/opentelemetry-operator.yaml # C·∫•u h√¨nh OpenTelemetry Collector apiVersion: opentelemetry.io/v1alpha1 kind: OpenTelemetryCollector metadata: name: otel-collector spec: config: | receivers: filelog: include: [\u0026#34;/var/log/containers/*.log\u0026#34;] exporters: awscloudwatchlogs: region: ap-southeast-1 log_group_name: \u0026#34;/aws/containerinsights/otel-logs\u0026#34; service: pipelines: logs: receivers: [filelog] exporters: [awscloudwatchlogs] L∆∞u √Ω quan tr·ªçng:\nTheo d√µi chi ph√≠ CloudWatch Logs (t√≠nh theo GB ingested) C√¢n nh·∫Øc log retention policy ph√π h·ª£p S·ª≠ d·ª•ng log aggregation v√† sampling cho production workloads K·∫øt h·ª£p v·ªõi CloudWatch Insights ƒë·ªÉ query v√† analyze logs üëâ Ti·∫øp theo: 5.2 Security Dashboard ‚Üí ƒë·ªÉ thi·∫øt l·∫≠p monitoring v√† alerting cho cluster security.\n"},{"uri":"https://tunneeeee.github.io/Internship/vi/4-policy-enforcement-and-runtime-protection/1-opa-gatekeeper/","title":"Qu·∫£n l√Ω ch√≠nh s√°ch v·ªõi OPA Gatekeeper (Windows)","tags":[],"description":"","content":" N·ªôi dung ch√≠nh Gi·ªõi thi·ªáu OPA Gatekeeper C√†i ƒë·∫∑t Helm tr√™n Windows Tri·ªÉn khai Gatekeeper tr√™n EKS Vi·∫øt v√† ki·ªÉm tra policy Gi·ªõi thi·ªáu OPA (Open Policy Agent) l√† c√¥ng c·ª• d√πng ƒë·ªÉ th·ª±c thi ch√≠nh s√°ch tr√™n nhi·ªÅu h·ªá th·ªëng. Gatekeeper l√† m·ªôt d·ª± √°n m·ªü r·ªông gi√∫p √°p d·ª•ng OPA cho Kubernetes.\nGatekeeper gi√∫p:\nKi·ªÉm so√°t tri·ªÉn khai d·ª±a tr√™n quy t·∫Øc (constraint) Ghi log c√°c h√†nh vi vi ph·∫°m NgƒÉn ch·∫∑n c·∫•u h√¨nh kh√¥ng an to√†n (v√≠ d·ª•: c·∫•m image c√≥ tag :latest) C√†i ƒë·∫∑t Helm tr√™n Windows Truy c·∫≠p trang https://github.com/helm/helm/releases T·∫£i v·ªÅ file: helm-v3.x.x-windows-amd64.zip Gi·∫£i n√©n ‚Üí L·∫•y file helm.exe T·∫°o th∆∞ m·ª•c v√≠ d·ª•: C:\\Program Files\\helm\\ ‚Üí copy helm.exe v√†o Th√™m ƒë∆∞·ªùng d·∫´n v√†o Environment Variables \u0026gt; Path M·ªü PowerShell/CMD v√† ki·ªÉm tra: helm version ‚úÖ N·∫øu hi·ªán version l√† th√†nh c√¥ng.\nTri·ªÉn khai Gatekeeper tr√™n EKS B∆∞·ªõc 1: Th√™m Helm repo Gatekeeper helm repo add gatekeeper https://open-policy-agent.github.io/gatekeeper/charts helm repo update B∆∞·ªõc 2: C√†i ƒë·∫∑t Gatekeeper helm install gatekeeper gatekeeper/gatekeeper \\ --namespace gatekeeper-system \\ --create-namespace B∆∞·ªõc 3: Ki·ªÉm tra pod kubectl get pods -n gatekeeper-system üì∏ Ch·ª•p ·∫£nh tr·∫°ng th√°i Running.\nVi·∫øt v√† ki·ªÉm tra policy B∆∞·ªõc 1: T·∫°o file template.yaml apiVersion: templates.gatekeeper.sh/v1beta1 kind: ConstraintTemplate metadata: name: k8srequiredimagetag spec: crd: spec: names: kind: K8sRequiredImageTag targets: - target: admission.k8s.gatekeeper.sh rego: | package k8srequiredimagetag violation[\u0026#34;image tag \u0026#39;latest\u0026#39; is not allowed\u0026#34;] { container := input.review.object.spec.containers[_] endswith(container.image, \u0026#34;:latest\u0026#34;) } kubectl apply -f template.yaml B∆∞·ªõc 2: T·∫°o file constraint.yaml apiVersion: constraints.gatekeeper.sh/v1beta1 kind: K8sRequiredImageTag metadata: name: disallow-latest-tag spec: match: kinds: - apiGroups: [\u0026#34;\u0026#34;] kinds: [\u0026#34;Pod\u0026#34;] kubectl apply -f constraint.yaml B∆∞·ªõc 3: T·∫°o pod test b·ªã vi ph·∫°m apiVersion: v1 kind: Pod metadata: name: test-pod spec: containers: - name: nginx image: nginx:latest kubectl apply -f test-pod.yaml ‚û°Ô∏è K·∫øt qu·∫£: Pod b·ªã t·ª´ ch·ªëi do vi ph·∫°m ch√≠nh s√°ch.\n‚úÖ Ghi ch√∫:\nGatekeeper r·∫•t hi·ªáu qu·∫£ trong vi·ªác ki·ªÉm so√°t vi·ªác tri·ªÉn khai. C√≥ th·ªÉ m·ªü r·ªông vi·∫øt policy ri√™ng theo y√™u c·∫ßu. Ti·∫øp theo: 4.2 Gi√°m s√°t Runtime v·ªõi Falco ‚Üí\n"},{"uri":"https://tunneeeee.github.io/Internship/vi/3-container-security-hardening/1-image-scanning-with-trivy/","title":"Qu√©t l·ªó h·ªïng container image b·∫±ng Trivy (qua Docker)","tags":[],"description":"","content":"N·ªôi dung ch√≠nh Gi·ªõi thi·ªáu Trivy C√†i ƒë·∫∑t v√† s·ª≠ d·ª•ng Trivy v·ªõi Docker tr√™n Windows Qu√©t image Docker v√† ph√¢n t√≠ch k·∫øt qu·∫£ Ghi ch√∫ v√† Best Practice Gi·ªõi thi·ªáu Trivy Trivy l√† c√¥ng c·ª• m√£ ngu·ªìn m·ªü h·ªó tr·ª£ qu√©t:\nL·ªó h·ªïng b·∫£o m·∫≠t trong container image (CVE) L·ªói c·∫•u h√¨nh trong IaC nh∆∞ Kubernetes YAML, Terraform, v.v. H·ªó tr·ª£ ƒë·ªãnh d·∫°ng ƒë·∫ßu ra chu·∫©n: table, JSON, SARIF\u0026hellip; C√†i ƒë·∫∑t v√† s·ª≠ d·ª•ng Trivy v·ªõi Docker tr√™n Windows ‚úÖ ƒêi·ªÅu ki·ªán ƒê√£ c√†i ƒë·∫∑t Docker Desktop cho Windows (WSL2 ho·∫∑c Hyper-V) ƒê·∫£m b·∫£o Docker ƒëang ch·∫°y üê≥ Ch·∫°y Trivy tr·ª±c ti·∫øp t·ª´ Docker C√¢u l·ªánh m·∫´u (qu√©t image nginx):\ndocker run --rm -v /var/run/docker.sock:/var/run/docker.sock ` -v $env:USERPROFILE\\.trivy-cache:/root/.cache/ ` aquasec/trivy:latest image nginx üí° Gi·∫£i th√≠ch:\n\u0026ndash;rm: x√≥a container sau khi ch·∫°y xong -v /var/run/docker.sock:/var/run/docker.sock: cho ph√©p Trivy truy c·∫≠p image tr√™n m√°y host -v $env:USERPROFILE.trivy-cache:/root/.cache/: mount th∆∞ m·ª•c cache ƒë·ªÉ ti·∫øt ki·ªám th·ªùi gian qu√©t l·∫ßn sau aquasec/trivy:latest: s·ª≠ d·ª•ng image ch√≠nh th·ª©c t·ª´ Docker Hub image nginx: ch·ªâ ƒë·ªãnh l·ªánh v√† t√™n image c·∫ßn qu√©t üñº V√≠ d·ª• th·ª±c t·∫ø v·ªõi image c√≥ l·ªó h·ªïng\ndocker run --rm -v /var/run/docker.sock:/var/run/docker.sock ` -v $env:USERPROFILE\\.trivy-cache:/root/.cache/ ` aquasec/trivy:latest image nginxinc/nginx-unprivileged:1.24.0-alpine-slim Qu√©t image Docker v√† ph√¢n t√≠ch k·∫øt qu·∫£ Sau khi ch·∫°y l·ªánh, b·∫°n s·∫Ω nh·∫≠n ƒë∆∞·ª£c k·∫øt qu·∫£ d·∫°ng b·∫£ng: Total: 27 (UNKNOWN: 2, LOW: 2, MEDIUM: 20, HIGH: 3)\nLibrary Vulnerability Severity Installed Fixed Title libcrypto3 CVE-2024-6119 HIGH 3.1.4-r6 3.1.7-r0 openssl: DoS trong X.509 name checks nginx CVE-2023-44487 HIGH 1.24.0-r1 1.24.0-r7 HTTP/2 vulnerability d·∫´n ƒë·∫øn t·∫•n c√¥ng DDoS busybox CVE-2023-42366 MEDIUM 1.36.1-r5 1.36.1-r6 Heap-buffer-overflow trong busybox awk ‚ö†Ô∏è D√π ƒë√¢y l√† image slim v√† ph·ªï bi·∫øn, nh∆∞ng v·∫´n t·ªìn t·∫°i nhi·ªÅu l·ªó h·ªïng b·∫£o m·∫≠t (HIGH, MEDIUM). ƒêi·ªÅu n√†y cho th·∫•y vi·ªác qu√©t ƒë·ªãnh k·ª≥ l√† r·∫•t c·∫ßn thi·∫øt.\nKhi ch·∫°y l·ªánh qu√©t, b·∫°n s·∫Ω nh·∫≠n ƒë∆∞·ª£c b·∫£ng chi ti·∫øt c√°c g√≥i b·ªã ·∫£nh h∆∞·ªüng, c·∫•p ƒë·ªô nghi√™m tr·ªçng (Severity), v√† phi√™n b·∫£n ƒë√£ v√°. V√≠ d·ª• ph√¢n t√≠ch:\nCVE-2024-6119 (HIGH): ·∫£nh h∆∞·ªüng ƒë·∫øn openssl g√¢y t·ª´ ch·ªëi d·ªãch v·ª• (DoS) CVE-2023-44487 (HIGH): ·∫£nh h∆∞·ªüng HTTP/2, c√≥ th·ªÉ b·ªã DDoS CVE-2023-42366 (MEDIUM): l·ªói tr√†n b·ªô ƒë·ªám (heap buffer overflow) ‚úÖ C√°ch x·ª≠ l√Ω\nLu√¥n ∆∞u ti√™n s·ª≠a l·ªói CRITICAL v√† HIGH N·∫øu c√≥ th·ªÉ, d√πng phi√™n b·∫£n m·ªõi h∆°n c·ªßa image (1.24.0-r7, 1.25.x, \u0026hellip;) Tr√°nh d√πng :latest, n√™n c·ªë ƒë·ªãnh phi√™n b·∫£n ƒë·ªÉ ki·ªÉm so√°t an to√†n Ghi ch√∫ v√† Best Practice Xu·∫•t file k·∫øt qu·∫£:\ndocker run --rm ` -v /var/run/docker.sock:/var/run/docker.sock ` -v \u0026#34;$env:USERPROFILE/.trivy-cache:/root/.cache\u0026#34; ` -v \u0026#34;$PWD:/root/report\u0026#34; ` aquasec/trivy:latest image -f json -o /root/report/result.json nginx ‚û°Ô∏è K·∫øt qu·∫£ JSON s·∫Ω l∆∞u t·∫°i D:\\pj_aws\\result.json\nT√≠ch h·ª£p CI/CD: B·∫°n c√≥ th·ªÉ t√≠ch h·ª£p l·ªánh qu√©t tr√™n v√†o:\nGitHub Actions GitLab CI/CD Jenkins, CircleCI\u0026hellip; ‚úÖ Gi√∫p ki·ªÉm tra b·∫£o m·∫≠t t·ª± ƒë·ªông m·ªói l·∫ßn build ho·∫∑c deploy.\nüéØ K·∫øt lu·∫≠n: Trivy l√† c√¥ng c·ª• kh√¥ng th·ªÉ thi·∫øu khi tri·ªÉn khai container production. B·∫°n n√™n qu√©t image th∆∞·ªùng xuy√™n, s·ª≠ d·ª•ng image ch√≠nh th·ª©c, gi·ªØ b·∫£n c·∫≠p nh·∫≠t, v√† t√≠ch h·ª£p CI/CD ƒë·ªÉ ƒë·∫£m b·∫£o an to√†n cho h·ªá th·ªëng.\n"},{"uri":"https://tunneeeee.github.io/Internship/vi/1-intro-to-container-security/","title":"Gi·ªõi thi·ªáu v·ªÅ B·∫£o m·∫≠t Container","tags":[],"description":"","content":"üéØ M·ª•c ti√™u c·ªßa ch∆∞∆°ng n√†y Trong ch∆∞∆°ng ƒë·∫ßu ti√™n n√†y, b·∫°n s·∫Ω ƒë∆∞·ª£c l√†m quen v·ªõi c√°c kh√°i ni·ªám quan tr·ªçng nh·∫•t v·ªÅ b·∫£o m·∫≠t container, t·ª´ t·ªïng quan l√Ω thuy·∫øt ƒë·∫øn k·ªπ nƒÉng th·ª±c h√†nh ph√¢n t√≠ch m·ªëi ƒëe do·∫°. ƒê√¢y l√† ph·∫ßn n·ªÅn t·∫£ng cho to√†n b·ªô workshop.\nüìö N·ªôi dung ch√≠nh 1.1 T·ªïng quan v·ªÅ B·∫£o m·∫≠t Container\nGi·ªõi thi·ªáu container l√† g√¨, c√°c l·ªõp b·∫£o m·∫≠t trong v√≤ng ƒë·ªùi container, v√† t·ªïng quan v·ªÅ c√°c c√¥ng c·ª• s·∫Ω s·ª≠ d·ª•ng trong workshop nh∆∞ Falco, OPA, NetworkPolicy, Trivy\u0026hellip;\n1.2 M√¥ h√¨nh M·ªëi ƒëe do·∫° (Threat Modeling)\nT√¨m hi·ªÉu m√¥ h√¨nh STRIDE, x√°c ƒë·ªãnh c√°c ƒëi·ªÉm t·∫•n c√¥ng trong h·ªá th·ªëng container, v√† th·ª±c h√†nh v·∫Ω s∆° ƒë·ªì threat model cho m·ªôt ·ª©ng d·ª•ng container m·∫´u.\n‚úÖ K·∫øt qu·∫£ sau ch∆∞∆°ng n√†y Hi·ªÉu r√µ l√Ω do t·∫°i sao container c·∫ßn ƒë∆∞·ª£c b·∫£o m·∫≠t ch·∫∑t ch·∫Ω N·∫Øm ƒë∆∞·ª£c m√¥ h√¨nh b·∫£o m·∫≠t t·ªïng th·ªÉ cho container: t·ª´ build ƒë·∫øn runtime Bi·∫øt c√°ch x√°c ƒë·ªãnh m·ªëi ƒëe do·∫° ti·ªÅm ·∫©n qua m√¥ h√¨nh STRIDE S·∫µn s√†ng ƒë·ªÉ b∆∞·ªõc v√†o th·ª±c h√†nh tri·ªÉn khai b·∫£o m·∫≠t tr√™n m√¥i tr∆∞·ªùng AWS üöÄ B√¢y gi·ªù h√£y b·∫Øt ƒë·∫ßu v·ªõi ph·∫ßn 1.1 nh√©!\n"},{"uri":"https://tunneeeee.github.io/Internship/vi/2-setup-aws-eks/1-create-eks-cluster/","title":"T·∫°o Cluster EKS tr√™n AWS","tags":[],"description":"","content":"N·ªôi dung ch√≠nh:\nB∆∞·ªõc 1: C√†i ƒë·∫∑t c√¥ng c·ª• tr√™n Windows B∆∞·ªõc 2: T·∫°o file c·∫•u h√¨nh cluster B∆∞·ªõc 3: T·∫°o cluster b·∫±ng l·ªánh B∆∞·ªõc 4: Ki·ªÉm tra k·∫øt n·ªëi v·ªõi kubectl Ghi ch√∫ v√† l∆∞u √Ω B∆∞·ªõc 1: C√†i ƒë·∫∑t c√¥ng c·ª• tr√™n Windows AWS CLI Truy c·∫≠p: https://docs.aws.amazon.com/cli/latest/userguide/install-cliv2-windows.html ‚Üí T·∫£i file .msi, c√†i ƒë·∫∑t nh∆∞ ph·∫ßn m·ªÅm b√¨nh th∆∞·ªùng. Sau ƒë√≥ m·ªü CMD v√† ki·ªÉm tra:\naws ‚Äìversion N·∫øu hi·ªán version l√† c√†i th√†nh c√¥ng.\n‚öôÔ∏è C·∫•u h√¨nh t√†i kho·∫£n AWS:\nT·∫°o IAM USER T·∫°o Access keys/ Secret Access Key M·ªü powershell aws configure Sau ƒë√≥ nh·∫≠p c√°c th√¥ng tin: AWS Access Key ID AWS Secret Access Key Region: ap-southeast-1 Output format: json C√†i ƒë·∫∑t kubectl Truy c·∫≠p link ch√≠nh th·ª©c: üëâ https://kubernetes.io/docs/tasks/tools/install-kubectl-windows/ Ho·∫∑c d√πng choco n·∫øu ƒë√£ c√≥ Chocolatey:\nchoco install kubernetes-cli Ki·ªÉm tra l·∫°i b·∫±ng:\nkubectl version ‚Äìclient C√†i ƒë·∫∑t eksctl Truy c·∫≠p: üëâ https://eksctl.io/introduction/#installation T·∫£i file .exe ‚Üí ƒê·ªïi t√™n th√†nh eksctl.exe v√†: Copy v√†o th∆∞ m·ª•c nh∆∞ C:\\Program Files\\eksctl Th√™m th∆∞ m·ª•c ƒë√≥ v√†o Environment Variables \u0026gt; PATH Ho·∫∑c d√πng choco n·∫øu ƒë√£ c√≥ Chocolatey:\nchoco install eksctl Ki·ªÉm tra l·∫°i b·∫±ng: eksctl version B∆∞·ªõc 2: T·∫°o file c·∫•u h√¨nh cluster M·ªü Notepad ho·∫∑c VS Code, t·∫°o file eks-cluster.yaml v·ªõi n·ªôi dung:\napiVersion: eksctl.io/v1alpha5 kind: ClusterConfig metadata: name: secure-eks region: ap-southeast-1 nodeGroups: - name: ng-1 instanceType: t3.medium desiredCapacity: 2 ssh: allow: true L∆∞u l·∫°i c√πng th∆∞ m·ª•c n∆°i b·∫°n m·ªü terminal sau n√†y.\nB∆∞·ªõc 3: T·∫°o cluster b·∫±ng l·ªánh M·ªü PowerShell ho·∫∑c terminal trong VS Code, chuy·ªÉn ƒë·∫øn th∆∞ m·ª•c ch·ª©a file eks-cluster.yaml, sau ƒë√≥ ch·∫°y:\neksctl create cluster -f eks-cluster.yaml L·ªói b·∫°n c√≥ th·ªÉ g·∫∑p l√†: Error: cannot find EC2 key pair \u0026ldquo;~/.ssh/id_rsa.pub\u0026rdquo; üí° Nguy√™n nh√¢n: Trong file c·∫•u h√¨nh eks-cluster.yaml, b·∫°n c√≥ b·∫≠t SSH cho node group:\nssh: allow: true Khi allow: true, eksctl s·∫Ω c·ªë t√¨m file ~/.ssh/id_rsa.pub ƒë·ªÉ d√πng l√†m key pair SSH ‚Äì nh∆∞ng hi·ªán t·∫°i b·∫°n ch∆∞a t·∫°o key n√†y tr√™n m√°y Windows.\nL√∫c ƒë√≥ b·∫°n c·∫ßn t·∫°o key pair SSH th·ªß c√¥ng M·ªü PowerShell v√† ch·∫°y:\nssh-keygen Nh·∫•n Enter li√™n t·ª•c ƒë·ªÉ ch·∫•p nh·∫≠n ƒë∆∞·ªùng d·∫´n m·∫∑c ƒë·ªãnh (C:\\Users\u0026lt;t√™n_user\u0026gt;.ssh\\id_rsa)\nSau ƒë√≥ ki·ªÉm tra file:\ntype $env:USERPROFILE\\.ssh\\id_rsa.pub Ch·∫°y l·∫°i l·ªánh t·∫°o cluster:\neksctl create cluster -f eks-cluster.yaml üìå eksctl s·∫Ω t·ª± l·∫•y file id_rsa.pub v√† t·∫°o key pair t∆∞∆°ng ·ª©ng trong AWS EC2.\n‚è≥ Qu√° tr√¨nh t·∫°o c√≥ th·ªÉ m·∫•t 10‚Äì15 ph√∫t. eksctl s·∫Ω t·∫°o: VPC, IAM role, Security Group, Control Plane, EC2 Node‚Ä¶\nB∆∞·ªõc 4: Ki·ªÉm tra k·∫øt n·ªëi v·ªõi kubectl Sau khi cluster t·∫°o xong, x√°c minh k·∫øt n·ªëi:\nkubectl get nodes ‚úÖ B·∫°n s·∫Ω th·∫•y 2 node worker ƒëang ch·∫°y ‚Äì EKS ƒë√£ ho·∫°t ƒë·ªông s·∫µn s√†ng!\nüì∏ Ch·ª•p ·∫£nh terminal k·∫øt qu·∫£ ƒë·ªÉ s·ª≠ d·ª•ng trong b√°o c√°o workshop.\nGhi ch√∫ eksctl s·∫Ω t·ª± t·∫°o VPC v√† node group n·∫øu ch∆∞a c√≥ N√™n d√πng region ap-southeast-1 (Singapore) n·∫øu b·∫°n ·ªü Vi·ªát Nam ƒë·ªÉ gi·∫£m ƒë·ªô tr·ªÖ "},{"uri":"https://tunneeeee.github.io/Internship/vi/1-intro-to-container-security/1-overview/","title":"T·ªïng quan v·ªÅ B·∫£o m·∫≠t Container","tags":[],"description":"","content":"N·ªôi dung ch√≠nh:\nContainer l√† g√¨ v√† v√¨ sao c·∫ßn b·∫£o m·∫≠t? C√°c l·ªõp b·∫£o m·∫≠t container M·ª•c ti√™u cu·ªëi c√πng c·ªßa workshop Container l√† g√¨ v√† v√¨ sao c·∫ßn b·∫£o m·∫≠t? Container l√† m·ªôt ph∆∞∆°ng ph√°p ƒë√≥ng g√≥i ·ª©ng d·ª•ng k√®m theo c√°c th∆∞ vi·ªán v√† c·∫•u h√¨nh ƒë·ªÉ ch·∫°y ƒë∆∞·ª£c ·ªü b·∫•t k·ª≥ ƒë√¢u. Tuy nhi√™n, do t√≠nh ch·∫•t nh·∫π v√† chia s·∫ª kernel n√™n container ti·ªÅm ·∫©n nhi·ªÅu r·ªßi ro b·∫£o m·∫≠t:\nContainer c√≥ th·ªÉ truy c·∫≠p file h·ªá th·ªëng host n·∫øu kh√¥ng ƒë∆∞·ª£c gi·ªõi h·∫°n ƒë√∫ng c√°ch T·∫•n c√¥ng ‚Äúcontainer escape‚Äù c√≥ th·ªÉ ·∫£nh h∆∞·ªüng to√†n b·ªô node L·ªói c·∫•u h√¨nh (exposed port, privilege mode) d·ªÖ b·ªã khai th√°c C√°c image t·ª´ ngu·ªìn kh√¥ng x√°c th·ª±c c√≥ th·ªÉ ch·ª©a m√£ ƒë·ªôc C√°c l·ªõp b·∫£o m·∫≠t container B·∫£o m·∫≠t container kh√¥ng ch·ªâ ·ªü runtime m√† c·∫ßn b·∫£o v·ªá to√†n b·ªô v√≤ng ƒë·ªùi ·ª©ng d·ª•ng:\nGiai ƒëo·∫°n Bi·ªán ph√°p Build Qu√©t image (Trivy), lo·∫°i b·ªè l·ªó h·ªïng Deploy Ki·ªÉm so√°t ch√≠nh s√°ch (OPA, limit) Runtime Ph√°t hi·ªán b·∫•t th∆∞·ªùng (Falco) Network Gi·ªõi h·∫°n truy c·∫≠p (NetworkPolicy) Monitoring C·∫£nh b√°o \u0026amp; ph·∫£n h·ªìi s·ª± c·ªë M·ª•c ti√™u cu·ªëi c√πng c·ªßa workshop Cu·ªëi workshop, b·∫°n s·∫Ω:\nC√†i ƒë·∫∑t cluster EKS v·ªõi ·ª©ng d·ª•ng container ho√° Th·ª±c hi·ªán qu√©t l·ªó h·ªïng, ki·ªÉm tra benchmark (CIS) √Åp d·ª•ng NetworkPolicy, OPA, Falco ƒë·ªÉ b·∫£o v·ªá container Tri·ªÉn khai h·ªá th·ªëng alerting v√† t·ª± ƒë·ªông h√≥a kh·∫Øc ph·ª•c Hi·ªÉu v√† √°p d·ª•ng m√¥ h√¨nh m·ªëi ƒëe do·∫° (STRIDE, ATT\u0026amp;CK) üß† B·∫°n s·∫Ω ch·ª•p ·∫£nh l·∫°i t·ª´ng b∆∞·ªõc v√† ƒë∆∞a v√†o n·ªôi dung workshop ƒë·ªÉ h∆∞·ªõng d·∫´n ng∆∞·ªùi kh√°c tri·ªÉn khai m√¥i tr∆∞·ªùng b·∫£o m·∫≠t container to√†n di·ªán.\n"},{"uri":"https://tunneeeee.github.io/Internship/vi/4-policy-enforcement-and-runtime-protection/2-falco-setup-and-rule/","title":"Gi√°m s√°t runtime v·ªõi Falco (Windows)","tags":[],"description":"","content":" N·ªôi dung ch√≠nh Gi·ªõi thi·ªáu Falco C√†i ƒë·∫∑t Falco b·∫±ng Helm Ki·ªÉm tra c·∫£nh b√°o runtime Gi·ªõi thi·ªáu Falco Falco l√† c√¥ng c·ª• gi√°m s√°t h√†nh vi th·ªùi gian th·ª±c trong Kubernetes. N√≥ gi√∫p ph√°t hi·ªán:\nTruy c·∫≠p b·∫•t th∆∞·ªùng ƒë·∫øn h·ªá th·ªëng (vd: /etc/passwd) S·ª≠ d·ª•ng shell trong container (bash, sh) Ghi ƒë√® file nh·∫°y c·∫£m Falco s·ª≠ d·ª•ng kernel syscall ƒë·ªÉ ghi nh·∫≠n h√†nh vi v√† ph√°t c·∫£nh b√°o d·ª±a tr√™n rule.\nC√†i ƒë·∫∑t Falco b·∫±ng Helm üîß Y√™u c·∫ßu: ƒê√£ c√†i kubectl, eksctl, AWS CLI, v√† c√≥ cluster EKS ho·∫°t ƒë·ªông B∆∞·ªõc 1: C√†i ƒë·∫∑t Helm Truy c·∫≠p trang https://github.com/helm/helm/releases/latest T·∫£i v·ªÅ file: windows-amd64.zip Gi·∫£i n√©n ‚Üí L·∫•y file helm.exe T·∫°o th∆∞ m·ª•c v√≠ d·ª•: C:\\Program Files\\helm\\ ‚Üí copy helm.exe v√†o Th√™m ƒë∆∞·ªùng d·∫´n v√†o Environment Variables \u0026gt; Path M·ªü PowerShell/CMD v√† ki·ªÉm tra: X√°c minh: helm version B∆∞·ªõc 2: Th√™m repo v√† c√†i Falco: helm repo add falcosecurity https://falcosecurity.github.io/charts helm repo update kubectl create ns falco helm install falco falcosecurity/falco -n falco üì∏ Ch·ª•p ·∫£nh pod Falco ƒëang ch·∫°y ·ªü namespace falco ƒë·ªÉ minh h·ªça t√†i li·ªáu.\nKi·ªÉm tra c·∫£nh b√°o runtime B∆∞·ªõc 1: M·ªü shell b·∫•t th∆∞·ªùng ƒë·ªÉ t·∫°o alert kubectl run -i --tty attacker --image=alpine -- sh Sau ƒë√≥ ch·∫°y trong terminal:\ntouch /etc/passwd B∆∞·ªõc 2: Xem log Falco kubectl logs -l app=falco -n falco ‚úÖ K·∫øt qu·∫£ mong ƒë·ª£i:\nFalco Alert: Write below etc detected (user=root command=touch /etc/passwd) üì∏ Ch·ª•p log Falco c√≥ ch·ª©a d√≤ng c·∫£nh b√°o ƒë·ªÉ ƒë∆∞a v√†o b√°o c√°o.\nGhi ch√∫ Falco kh√¥ng ngƒÉn ch·∫∑n h√†nh vi, ch·ªâ c·∫£nh b√°o. Mu·ªën t·ª± ƒë·ªông ph·∫£n ·ª©ng (4.3), b·∫°n c·∫ßn k·∫øt h·ª£p v·ªõi Falcosidekick ho·∫∑c c√°c c√¥ng c·ª• kh√°c. üëâ Ti·∫øp theo: 4.3 T·ª± ƒë·ªông ph·∫£n ·ª©ng v·ªõi vi ph·∫°m b·∫±ng Falcosidekick ‚Üí\n"},{"uri":"https://tunneeeee.github.io/Internship/vi/5-security-monitoring-and-response/2-security-dashboard/","title":"Security Dashboard - Gi√°m s√°t b·∫£o m·∫≠t EKS","tags":[],"description":"","content":"N·ªôi dung ch√≠nh T·ªïng quan Security Dashboard Thi·∫øt l·∫≠p Amazon GuardDuty C·∫•u h√¨nh AWS Config Rules T√≠ch h·ª£p CloudWatch Security Dashboard C·∫£nh b√°o v√† Automation T·ªïng quan Security Dashboard Security Dashboard t·ªïng h·ª£p th√¥ng tin b·∫£o m·∫≠t t·ª´ nhi·ªÅu ngu·ªìn kh√°c nhau ƒë·ªÉ cung c·∫•p c√°i nh√¨n t·ªïng quan v·ªÅ t√¨nh tr·∫°ng b·∫£o m·∫≠t c·ªßa EKS cluster.\nKi·∫øn tr√∫c t·ªïng quan: EKS Cluster ‚îÄ‚îÄ‚Üí GuardDuty ‚îÄ‚îÄ‚Üí Security Hub ‚îÄ‚îÄ‚Üí CloudWatch Dashboard\r‚îÇ ‚îÇ ‚îÇ ‚îÇ\r‚îú‚îÄ‚Üí Config ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§ ‚îÇ ‚îÇ\r‚îî‚îÄ‚Üí Falco ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò ‚îÇ\r‚îÇ\rSNS Alerts ‚Üê‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò Thi·∫øt l·∫≠p Amazon GuardDuty K√≠ch ho·∫°t GuardDuty cho EKS # K√≠ch ho·∫°t GuardDuty aws guardduty create-detector --enable # L·∫•y detector ID DETECTOR_ID=$(aws guardduty list-detectors --query \u0026#39;DetectorIds[0]\u0026#39; --output text) # K√≠ch ho·∫°t EKS Protection aws guardduty update-detector \\ --detector-id $DETECTOR_ID \\ --kubernetes-audit-logs-configuration Enable=true C·∫•u h√¨nh x·ª≠ l√Ω GuardDuty findings # guardduty-processor.yaml apiVersion: v1 kind: ConfigMap metadata: name: guardduty-processor namespace: security-monitoring data: process-findings.py: | import json import boto3 def lambda_handler(event, context): detail = event[\u0026#39;detail\u0026#39;] finding_type = detail[\u0026#39;type\u0026#39;] severity = detail[\u0026#39;severity\u0026#39;] # X·ª≠ l√Ω findings li√™n quan ƒë·∫øn EKS if \u0026#39;Kubernetes\u0026#39; in finding_type: send_to_cloudwatch(detail) # G·ª≠i alert cho findings nghi√™m tr·ªçng if severity \u0026gt;= 7.0: send_critical_alert(detail) return {\u0026#39;statusCode\u0026#39;: 200} def send_to_cloudwatch(finding): cloudwatch = boto3.client(\u0026#39;cloudwatch\u0026#39;) cloudwatch.put_metric_data( Namespace=\u0026#39;EKS/Security\u0026#39;, MetricData=[{ \u0026#39;MetricName\u0026#39;: \u0026#39;SecurityFinding\u0026#39;, \u0026#39;Value\u0026#39;: finding[\u0026#39;severity\u0026#39;], \u0026#39;Unit\u0026#39;: \u0026#39;Count\u0026#39;, \u0026#39;Dimensions\u0026#39;: [ {\u0026#39;Name\u0026#39;: \u0026#39;FindingType\u0026#39;, \u0026#39;Value\u0026#39;: finding[\u0026#39;type\u0026#39;]} ] }] ) def send_critical_alert(finding): sns = boto3.client(\u0026#39;sns\u0026#39;) sns.publish( TopicArn=\u0026#39;arn:aws:sns:ap-southeast-1:ACCOUNT:eks-security-alerts\u0026#39;, Message=f\u0026#34;Critical EKS Security Alert: {finding[\u0026#39;type\u0026#39;]}\u0026#34;, Subject=\u0026#39;Critical EKS Security Alert\u0026#39; ) C·∫•u h√¨nh AWS Config Rules Tri·ªÉn khai EKS Config Rules # K√≠ch ho·∫°t Config aws configservice put-configuration-recorder \\ --configuration-recorder name=eks-config-recorder,roleARN=arn:aws:iam::ACCOUNT:role/aws-service-role/config.amazonaws.com/AWSServiceRoleForConfig # T·∫°o EKS-specific rules aws configservice put-config-rule \\ --config-rule \u0026#39;{ \u0026#34;ConfigRuleName\u0026#34;: \u0026#34;eks-cluster-logging-enabled\u0026#34;, \u0026#34;Source\u0026#34;: { \u0026#34;Owner\u0026#34;: \u0026#34;AWS\u0026#34;, \u0026#34;SourceIdentifier\u0026#34;: \u0026#34;EKS_CLUSTER_LOGGING_ENABLED\u0026#34; }, \u0026#34;InputParameters\u0026#34;: \u0026#34;{\\\u0026#34;desiredLogTypes\\\u0026#34;:\\\u0026#34;api,audit,authenticator\\\u0026#34;}\u0026#34; }\u0026#39; aws configservice put-config-rule \\ --config-rule \u0026#39;{ \u0026#34;ConfigRuleName\u0026#34;: \u0026#34;eks-secrets-encrypted\u0026#34;, \u0026#34;Source\u0026#34;: { \u0026#34;Owner\u0026#34;: \u0026#34;AWS\u0026#34;, \u0026#34;SourceIdentifier\u0026#34;: \u0026#34;EKS_SECRETS_ENCRYPTED\u0026#34; } }\u0026#39; Custom Config Rule cho Pod Security # pod-security-rule.py import json import boto3 from kubernetes import client, config def lambda_handler(event, context): # Load kubeconfig config.load_incluster_config() v1 = client.CoreV1Api() # Check pod security standards non_compliant_pods = [] pods = v1.list_pod_for_all_namespaces() for pod in pods.items: if pod.metadata.namespace in [\u0026#39;kube-system\u0026#39;, \u0026#39;kube-public\u0026#39;]: continue violations = check_pod_security(pod) if violations: non_compliant_pods.append({ \u0026#39;name\u0026#39;: pod.metadata.name, \u0026#39;namespace\u0026#39;: pod.metadata.namespace, \u0026#39;violations\u0026#39;: violations }) # Return compliance result return { \u0026#39;complianceType\u0026#39;: \u0026#39;NON_COMPLIANT\u0026#39; if non_compliant_pods else \u0026#39;COMPLIANT\u0026#39;, \u0026#39;annotation\u0026#39;: f\u0026#34;Found {len(non_compliant_pods)} non-compliant pods\u0026#34; } def check_pod_security(pod): violations = [] # Check if pod runs as root if pod.spec.security_context and pod.spec.security_context.run_as_user == 0: violations.append(\u0026#34;Runs as root user\u0026#34;) # Check privileged containers for container in pod.spec.containers: if container.security_context and container.security_context.privileged: violations.append(f\u0026#34;Container {container.name} is privileged\u0026#34;) return violations T√≠ch h·ª£p CloudWatch Security Dashboard T·∫°o Security Dashboard { \u0026#34;widgets\u0026#34;: [ { \u0026#34;type\u0026#34;: \u0026#34;metric\u0026#34;, \u0026#34;properties\u0026#34;: { \u0026#34;metrics\u0026#34;: [ [\u0026#34;EKS/Security\u0026#34;, \u0026#34;SecurityFinding\u0026#34;, \u0026#34;FindingType\u0026#34;, \u0026#34;Kubernetes.Cluster\u0026#34;], [\u0026#34;EKS/Security/Falco\u0026#34;, \u0026#34;SecurityAlert\u0026#34;, \u0026#34;Priority\u0026#34;, \u0026#34;CRITICAL\u0026#34;], [\u0026#34;AWS/Config\u0026#34;, \u0026#34;ComplianceByConfigRule\u0026#34;, \u0026#34;ConfigRuleName\u0026#34;, \u0026#34;eks-cluster-logging-enabled\u0026#34;] ], \u0026#34;period\u0026#34;: 300, \u0026#34;stat\u0026#34;: \u0026#34;Sum\u0026#34;, \u0026#34;region\u0026#34;: \u0026#34;ap-southeast-1\u0026#34;, \u0026#34;title\u0026#34;: \u0026#34;Security Overview\u0026#34;, \u0026#34;view\u0026#34;: \u0026#34;timeSeries\u0026#34; } }, { \u0026#34;type\u0026#34;: \u0026#34;log\u0026#34;, \u0026#34;properties\u0026#34;: { \u0026#34;query\u0026#34;: \u0026#34;SOURCE \u0026#39;/aws/eks/security/falco\u0026#39;\\n| fields @timestamp, rule, priority, output\\n| filter priority = \\\u0026#34;CRITICAL\\\u0026#34;\\n| sort @timestamp desc\\n| limit 10\u0026#34;, \u0026#34;region\u0026#34;: \u0026#34;ap-southeast-1\u0026#34;, \u0026#34;title\u0026#34;: \u0026#34;Recent Critical Alerts\u0026#34;, \u0026#34;view\u0026#34;: \u0026#34;table\u0026#34; } }, { \u0026#34;type\u0026#34;: \u0026#34;metric\u0026#34;, \u0026#34;properties\u0026#34;: { \u0026#34;metrics\u0026#34;: [ [\u0026#34;EKS/Security/Pods\u0026#34;, \u0026#34;PrivilegedPods\u0026#34;, \u0026#34;Namespace\u0026#34;, \u0026#34;demo2\u0026#34;], [\u0026#34;.\u0026#34;, \u0026#34;RootContainers\u0026#34;, \u0026#34;.\u0026#34;, \u0026#34;.\u0026#34;] ], \u0026#34;period\u0026#34;: 300, \u0026#34;stat\u0026#34;: \u0026#34;Average\u0026#34;, \u0026#34;region\u0026#34;: \u0026#34;ap-southeast-1\u0026#34;, \u0026#34;title\u0026#34;: \u0026#34;Pod Security Metrics\u0026#34; } } ] } Tri·ªÉn khai Dashboard # T·∫°o dashboard aws cloudwatch put-dashboard \\ --dashboard-name \u0026#34;EKS-Security-Dashboard\u0026#34; \\ --dashboard-body file://eks-security-dashboard.json # T·∫°o custom metrics cho pod security kubectl apply -f - \u0026lt;\u0026lt;EOF apiVersion: v1 kind: ServiceAccount metadata: name: security-metrics-collector namespace: security-monitoring --- apiVersion: rbac.authorization.k8s.io/v1 kind: ClusterRole metadata: name: security-metrics-collector rules: - apiGroups: [\u0026#34;\u0026#34;] resources: [\u0026#34;pods\u0026#34;, \u0026#34;namespaces\u0026#34;] verbs: [\u0026#34;get\u0026#34;, \u0026#34;list\u0026#34;, \u0026#34;watch\u0026#34;] --- apiVersion: rbac.authorization.k8s.io/v1 kind: ClusterRoleBinding metadata: name: security-metrics-collector roleRef: apiGroup: rbac.authorization.k8s.io kind: ClusterRole name: security-metrics-collector subjects: - kind: ServiceAccount name: security-metrics-collector namespace: security-monitoring EOF C·∫£nh b√°o v√† Automation T·∫°o CloudWatch Alarms # Alarm cho Critical Security Findings aws cloudwatch put-metric-alarm \\ --alarm-name \u0026#34;EKS-Critical-Security-Findings\u0026#34; \\ --alarm-description \u0026#34;Critical security findings detected\u0026#34; \\ --metric-name SecurityFinding \\ --namespace EKS/Security \\ --statistic Sum \\ --period 300 \\ --threshold 1 \\ --comparison-operator GreaterThanOrEqualToThreshold \\ --evaluation-periods 1 \\ --alarm-actions arn:aws:sns:ap-southeast-1:ACCOUNT:eks-security-alerts # Alarm cho Falco Critical Alerts aws cloudwatch put-metric-alarm \\ --alarm-name \u0026#34;EKS-Falco-Critical-Alerts\u0026#34; \\ --alarm-description \u0026#34;Falco critical alerts detected\u0026#34; \\ --metric-name SecurityAlert \\ --namespace EKS/Security/Falco \\ --statistic Sum \\ --period 300 \\ --threshold 1 \\ --comparison-operator GreaterThanOrEqualToThreshold \\ --evaluation-periods 1 \\ --alarm-actions arn:aws:sns:ap-southeast-1:ACCOUNT:eks-security-alerts # Alarm cho Pod Security Violations aws cloudwatch put-metric-alarm \\ --alarm-name \u0026#34;EKS-Pod-Security-Violations\u0026#34; \\ --alarm-description \u0026#34;Pod security violations detected\u0026#34; \\ --metric-name PrivilegedPods \\ --namespace EKS/Security/Pods \\ --statistic Average \\ --period 600 \\ --threshold 0 \\ --comparison-operator GreaterThanThreshold \\ --evaluation-periods 2 \\ --alarm-actions arn:aws:sns:ap-southeast-1:ACCOUNT:eks-security-alerts Automated Response # security-response-automation.py import json import boto3 from kubernetes import client, config def lambda_handler(event, context): \u0026#34;\u0026#34;\u0026#34;Automated response to security alerts\u0026#34;\u0026#34;\u0026#34; # Parse CloudWatch alarm message = json.loads(event[\u0026#39;Records\u0026#39;][0][\u0026#39;Sns\u0026#39;][\u0026#39;Message\u0026#39;]) alarm_name = message[\u0026#39;AlarmName\u0026#39;] # Load kubeconfig config.load_incluster_config() v1 = client.CoreV1Api() # Automated responses based on alarm type if \u0026#34;Pod-Security-Violations\u0026#34; in alarm_name: quarantine_violating_pods(v1) elif \u0026#34;Critical-Security-Findings\u0026#34; in alarm_name: isolate_suspicious_workloads(v1) elif \u0026#34;Falco-Critical-Alerts\u0026#34; in alarm_name: scale_down_suspicious_deployments(v1) return {\u0026#39;statusCode\u0026#39;: 200} def quarantine_violating_pods(v1): \u0026#34;\u0026#34;\u0026#34;Quarantine pods with security violations\u0026#34;\u0026#34;\u0026#34; pods = v1.list_pod_for_all_namespaces() for pod in pods.items: if has_security_violation(pod): # Add quarantine label v1.patch_namespaced_pod( name=pod.metadata.name, namespace=pod.metadata.namespace, body={ \u0026#39;metadata\u0026#39;: { \u0026#39;labels\u0026#39;: { \u0026#39;security.policy/quarantine\u0026#39;: \u0026#39;true\u0026#39; } } } ) def isolate_suspicious_workloads(v1): \u0026#34;\u0026#34;\u0026#34;Isolate workloads with security findings\u0026#34;\u0026#34;\u0026#34; # Implementation for workload isolation pass def scale_down_suspicious_deployments(v1): \u0026#34;\u0026#34;\u0026#34;Scale down deployments with critical alerts\u0026#34;\u0026#34;\u0026#34; # Implementation for scaling down pass T·∫°o SNS Topic v√† Subscription # T·∫°o SNS topic aws sns create-topic --name eks-security-alerts # Subscribe email aws sns subscribe \\ --topic-arn arn:aws:sns:ap-southeast-1:ACCOUNT:eks-security-alerts \\ --protocol email \\ --notification-endpoint security@company.com # Subscribe Lambda function aws sns subscribe \\ --topic-arn arn:aws:sns:ap-southeast-1:ACCOUNT:eks-security-alerts \\ --protocol lambda \\ --notification-endpoint arn:aws:lambda:ap-southeast-1:ACCOUNT:function:security-response-automation T·ªïng k·∫øt Security Dashboard cung c·∫•p:\nT·ªïng quan b·∫£o m·∫≠t t·∫≠p trung: T√≠ch h·ª£p th√¥ng tin t·ª´ GuardDuty, Config, v√† Falco C·∫£nh b√°o th·ªùi gian th·ª±c: Ph√°t hi·ªán v√† ph·∫£n ·ª©ng nhanh v·ªõi c√°c m·ªëi ƒëe d·ªça Automation: T·ª± ƒë·ªông h√≥a ph·∫£n ·ª©ng v·ªõi c√°c s·ª± c·ªë b·∫£o m·∫≠t Compliance monitoring: Theo d√µi tu√¢n th·ªß c√°c policy b·∫£o m·∫≠t Truy v·∫øt v√† ph√¢n t√≠ch: L∆∞u tr·ªØ v√† ph√¢n t√≠ch c√°c s·ª± ki·ªán b·∫£o m·∫≠t Dashboard n√†y gi√∫p team security c√≥ c√°i nh√¨n to√†n di·ªán v·ªÅ t√¨nh tr·∫°ng b·∫£o m·∫≠t c·ªßa EKS cluster v√† ph·∫£n ·ª©ng k·ªãp th·ªùi v·ªõi c√°c m·ªëi ƒëe d·ªça.\n"},{"uri":"https://tunneeeee.github.io/Internship/vi/3-container-security-hardening/2-cis-benchmark-with-kubebench/","title":"Ki·ªÉm tra tu√¢n th·ªß CIS Benchmark v·ªõi kube-bench","tags":[],"description":"","content":" N·ªôi dung ch√≠nh Gi·ªõi thi·ªáu v·ªÅ CIS Benchmark v√† kube-bench Tri·ªÉn khai kube-bench tr√™n EKS Ph√¢n t√≠ch k·∫øt qu·∫£ ki·ªÉm tra v√† khuy·∫øn ngh·ªã Gi·ªõi thi·ªáu CIS Kubernetes Benchmark l√† b·ªô quy t·∫Øc b·∫£o m·∫≠t chu·∫©n h√≥a do Center for Internet Security ban h√†nh. N√≥ bao g·ªìm c√°c m·ª•c ki·ªÉm tra t·ª´ API Server, Scheduler, Etcd, Kubelet\u0026hellip;\nkube-bench l√† c√¥ng c·ª• c·ªßa Aqua Security ƒë·ªÉ t·ª± ƒë·ªông h√≥a vi·ªác ki·ªÉm tra c√°c ƒëi·ªÉm ƒë√≥ tr√™n cluster Kubernetes.\nTri·ªÉn khai kube-bench tr√™n EKS B∆∞·ªõc 1: T·∫°o file job yaml T·∫°o file kube-bench-job.yaml nh∆∞ sau:\napiVersion: batch/v1 kind: Job metadata: name: kube-bench spec: template: spec: containers: - name: kube-bench image: aquasec/kube-bench:latest command: [\u0026#34;kube-bench\u0026#34;, \u0026#34;--benchmark\u0026#34;, \u0026#34;eks\u0026#34;] volumeMounts: - name: var-lib-kubelet mountPath: /var/lib/kubelet readOnly: true - name: etc-systemd mountPath: /etc/systemd readOnly: true - name: var-lib-etcd mountPath: /var/lib/etcd readOnly: true restartPolicy: Never volumes: - name: var-lib-kubelet hostPath: path: /var/lib/kubelet - name: etc-systemd hostPath: path: /etc/systemd - name: var-lib-etcd hostPath: path: /var/lib/etcd backoffLimit: 0 B∆∞·ªõc 2: √Åp d·ª•ng Job l√™n cluster kubectl apply -f kube-bench-job.yaml ‚è≥ Ch·ªù v√†i ph√∫t ƒë·ªÉ Job ch·∫°y xong.\nB∆∞·ªõc 3: Xem k·∫øt qu·∫£ ki·ªÉm tra kubectl logs job/kube-bench Ph√¢n t√≠ch k·∫øt qu·∫£ Output s·∫Ω hi·ªÉn th·ªã c√°c m·ª•c ki·ªÉm tra theo chu·∫©n CIS, v√≠ d·ª•:\n== Summary total ==\r4 checks PASS\r4 checks FAIL\r43 checks WARN ‚ùå [FAIL]\n\u0026ndash;anonymous-auth=false: t·∫Øt quy·ªÅn truy c·∫≠p ·∫©n danh \u0026ndash;authorization-mode=Webhook: c·∫•u h√¨nh authorization an to√†n \u0026ndash;make-iptables-util-chains=true: x·ª≠ l√Ω c√°c chu·ªói iptables ƒë√∫ng c√°ch üîß C√°ch kh·∫Øc ph·ª•c: S·ª≠a file kubelet.service tr√™n t·ª´ng node theo h∆∞·ªõng d·∫´n systemctl daemon-reload + restart kubelet.\n‚ö†Ô∏è [WARN]\nS·ª≠ d·ª•ng qu√° nhi·ªÅu wildcard trong RBAC (roles, clusterroles) Kh√¥ng c√≥ NetworkPolicy cho c√°c namespace PSP ch∆∞a c·∫•u h√¨nh k·ªπ ‚Üí cho ph√©p container ƒë·∫∑c quy·ªÅn (privileged) Ch∆∞a c·∫•u h√¨nh chu·∫©n IAM / ECR / Secrets tr√™n AWS ‚úÖ [PASS]\nM·ªôt s·ªë t·ªáp c·∫•u h√¨nh kubelet ƒë·∫∑t quy·ªÅn s·ªü h·ªØu v√† permission ƒë√∫ng (644, root:root) Ghi ch√∫ b·ªï sung kube-bench c√≥ th·ªÉ ch·∫°y ·ªü mode host, daemonset, ho·∫∑c job, t√πy m·ª•c ƒë√≠ch. Ch·∫°y ri√™ng node c√≥ label b·∫±ng c√°ch d√πng nodeSelector C√≥ th·ªÉ export k·∫øt qu·∫£ sang JSON: kubectl logs job/kube-bench -o json \u0026gt; cis-result.json ‚úÖ Best Practice t·ªïng qu√°t:\nLu√¥n ki·ªÉm tra ƒë·ªãnh k·ª≥ theo CIS Benchmark Kh√¥ng d√πng config m·∫∑c ƒë·ªãnh c·ªßa Kubernetes / Kubelet C·ªë g·∫Øng gi·∫£m m·ª©c ƒë·ªô c·∫£nh b√°o WARN ‚Üí FAIL ‚Üí PASS theo th·ª© t·ª± ∆∞u ti√™n T·ª± ƒë·ªông h√≥a ki·ªÉm tra b·∫±ng c√°ch t√≠ch h·ª£p kube-bench v√†o CI/CD ho·∫∑c cron job "},{"uri":"https://tunneeeee.github.io/Internship/vi/1-intro-to-container-security/2-threat-modeling/","title":"M√¥ h√¨nh m·ªëi ƒëe do·∫° (Threat Modeling)","tags":[],"description":"","content":"N·ªôi dung ch√≠nh:\nM√¥ h√¨nh STRIDE l√† g√¨? X√°c ƒë·ªãnh b·ªÅ m·∫∑t t·∫•n c√¥ng container V·∫Ω s∆° ƒë·ªì m√¥ h√¨nh ƒëe do·∫° Th·ª±c h√†nh m√¥ h√¨nh ho√° m·ªëi ƒëe do·∫° v·ªõi container app M√¥ h√¨nh STRIDE l√† g√¨? STRIDE l√† m·ªôt m√¥ h√¨nh gi√∫p x√°c ƒë·ªãnh c√°c lo·∫°i m·ªëi ƒëe do·∫° trong h·ªá th·ªëng. N√≥ g·ªìm:\nTh√†nh ph·∫ßn M·ªëi ƒëe do·∫° S Spoofing ‚Äì Gi·∫£ m·∫°o danh t√≠nh T Tampering ‚Äì Can thi·ªáp d·ªØ li·ªáu R Repudiation ‚Äì Ch·ªëi b·ªè h√†nh vi I Information Disclosure ‚Äì R√≤ r·ªâ TT D Denial of Service ‚Äì T·ª´ ch·ªëi d·ªãch v·ª• E Elevation of Privilege ‚Äì Leo thang ƒë·∫∑c quy·ªÅn üß† STRIDE gi√∫p ph√¢n t√≠ch t·ª´ng th√†nh ph·∫ßn trong h·ªá th·ªëng ƒë·ªÉ x√°c ƒë·ªãnh l·ªó h·ªïng ti·ªÅm ·∫©n.\nX√°c ƒë·ªãnh b·ªÅ m·∫∑t t·∫•n c√¥ng container Khi tri·ªÉn khai ·ª©ng d·ª•ng container, c·∫ßn x√°c ƒë·ªãnh c√°c ƒëi·ªÉm c√≥ th·ªÉ b·ªã khai th√°c:\nContainer Image: ch·ª©a l·ªó h·ªïng (CVE), m√£ ƒë·ªôc Registry: kh√¥ng ƒë∆∞·ª£c b·∫£o v·ªá ‚Üí d·ªÖ b·ªã ƒë·∫©y/pull tr√°i ph√©p Kubernetes API: b·ªã t·∫•n c√¥ng qua RBAC sai Pod ch·∫°y v·ªõi root: tƒÉng r·ªßi ro leo thang Th√¥ng tin nh·∫°y c·∫£m: hardcoded secret, ENV var V·∫Ω s∆° ƒë·ªì m√¥ h√¨nh ƒëe do·∫° B·∫°n c√≥ th·ªÉ d√πng c√°c c√¥ng c·ª• sau ƒë·ªÉ minh ho·∫°:\n‚úèÔ∏è Draw.io üîê Microsoft Threat Modeling Tool üëâ S∆° ƒë·ªì n√™n g·ªìm:\nNg∆∞·ªùi d√πng (developer, attacker) C√°c th√†nh ph·∫ßn: registry, CI/CD, cluster, pod, secrets, DB Ghi ch√∫ l·ªó h·ªïng t∆∞∆°ng ·ª©ng v·ªõi STRIDE üì∏ Ch·ª•p ·∫£nh s∆° ƒë·ªì threat modeling ƒë·ªÉ minh ho·∫° cho t√†i li·ªáu sau.\nTh·ª±c h√†nh m√¥ h√¨nh ho√° m·ªëi ƒëe do·∫° v·ªõi container app Ch·ªçn m·ªôt ·ª©ng d·ª•ng container ho√° b·∫°n s·∫Ω tri·ªÉn khai ·ªü lab sau (VD: nginx + flask + mongo) Ph√¢n t√≠ch t·ª´ng b∆∞·ªõc t·ª´ build ‚Üí deploy ‚Üí ch·∫°y ‚Üí k·∫øt n·ªëi m·∫°ng Li·ªát k√™ m·ªëi ƒëe do·∫° v·ªõi STRIDE v√† ƒë·∫∑t bi·ªán ph√°p ph√≤ng ch·ªëng B∆∞·ªõc M·ªëi ƒëe do·∫° (STRIDE) Ph√≤ng ch·ªëng Push image Tampering K√Ω image, d√πng registry ri√™ng Ch·∫°y pod Elevation Privilege Kh√¥ng ch·∫°y v·ªõi root, drop capabilities K·∫øt n·ªëi DB Information Disclosure NetworkPolicy, kh√¥ng expose DB üìò K·∫øt qu·∫£ mong ƒë·ª£i:\nHi·ªÉu r√µ c√°c d·∫°ng ƒëe do·∫° b·∫£o m·∫≠t container T·ª± tay m√¥ h√¨nh ho√° m·ªëi ƒëe do·∫° cho ·ª©ng d·ª•ng b·∫°n s·∫Øp tri·ªÉn khai C√≥ s∆° ƒë·ªì threat modeling s·∫µn s√†ng d√πng trong workshop "},{"uri":"https://tunneeeee.github.io/Internship/vi/2-setup-aws-eks/2-deploy-demo-workloads/","title":"Tri·ªÉn khai workload m·∫´u tr√™n EKS","tags":[],"description":"","content":"N·ªôi dung ch√≠nh T·∫°o namespace ri√™ng cho demo Tri·ªÉn khai ·ª©ng d·ª•ng nginx v√† backend Ki·ªÉm tra k·∫øt n·ªëi v√† chu·∫©n b·ªã cho c√°c lab ti·∫øp theo T·∫°o namespace ri√™ng cho demo Namespace gi√∫p c√¥ l·∫≠p t√†i nguy√™n gi·ªØa c√°c ·ª©ng d·ª•ng kh√°c nhau. ƒê·∫ßu ti√™n, t·∫°o m·ªôt namespace t√™n l√† demo:\nkubectl create namespace demo üì∏ K·∫øt qu·∫£ hi·ªÉn th·ªã:\nSau ƒë√≥ ki·ªÉm tra l·∫°i:\nkubectl get ns üì∏ K·∫øt qu·∫£:\nTri·ªÉn khai ·ª©ng d·ª•ng nginx v√† backend ·ª®ng d·ª•ng m·∫´u g·ªìm 2 Pod:\nnginx (d√πng l√†m frontend) http-echo (d√πng l√†m backend) T·∫°o file demo-app.yaml v·ªõi n·ªôi dung sau:\napiVersion: v1 kind: Pod metadata: name: nginx namespace: demo spec: containers: - name: nginx image: nginx ports: - containerPort: 80 --- apiVersion: v1 kind: Pod metadata: name: backend namespace: demo spec: containers: - name: backend image: hashicorp/http-echo args: - \u0026#34;-text=Hello from backend\u0026#34; ports: - containerPort: 5678 ‚ñ∂Ô∏è √Åp d·ª•ng c·∫•u h√¨nh:\nkubectl apply -f demo-app.yaml üì∏ K·∫øt qu·∫£ sau khi apply:\nKi·ªÉm tra k·∫øt n·ªëi v√† chu·∫©n b·ªã cho c√°c lab ti·∫øp theo Ch·∫°y l·ªánh sau ƒë·ªÉ ki·ªÉm tra tr·∫°ng th√°i c√°c Pod:\nkubectl get pods -n demo üì∏ K·∫øt qu·∫£ hi·ªÉn th·ªã:\n‚úÖ B·∫°n s·∫Ω th·∫•y c·∫£ 2 Pod nginx v√† backend ƒëang ·ªü tr·∫°ng th√°i Running.\n·ª®ng d·ª•ng m·∫´u n√†y s·∫Ω ƒë∆∞·ª£c s·ª≠ d·ª•ng xuy√™n su·ªët trong c√°c ph·∫ßn ti·∫øp theo nh∆∞: NetworkPolicy, Falco, OPA\u0026hellip;\nTu·ª≥ ch·ªçn: Expose nginx ra ngo√†i ƒê·ªÉ truy c·∫≠p nginx t·ª´ b√™n ngo√†i (v√≠ d·ª• t·ª´ tr√¨nh duy·ªát ho·∫∑c curl), b·∫°n c√≥ th·ªÉ expose Pod qua LoadBalancer:\nkubectl expose pod nginx --port=80 --type=LoadBalancer -n demo Ghi ch√∫:\nC√¢u l·ªánh n√†y s·∫Ω t·∫°o m·ªôt Service c√≥ ƒë·ªãa ch·ªâ IP public (n·∫øu ch·∫°y tr√™n cloud nh∆∞ EKS) B·∫°n c√≥ th·ªÉ d√πng l·ªánh kubectl get svc -n demo ƒë·ªÉ l·∫•y ƒë·ªãa ch·ªâ truy c·∫≠p. üéâ B·∫°n ƒë√£ ho√†n t·∫•t ph·∫ßn tri·ªÉn khai workload m·∫´u ‚Äì s·∫µn s√†ng cho c√°c lab b·∫£o m·∫≠t ti·∫øp theo!\n"},{"uri":"https://tunneeeee.github.io/Internship/vi/2-setup-aws-eks/","title":"Kh·ªüi t·∫°o Cluster EKS tr√™n AWS","tags":[],"description":"","content":"T·ªïng quan Trong ch∆∞∆°ng n√†y, b·∫°n s·∫Ω h·ªçc c√°ch t·∫°o m√¥i tr∆∞·ªùng Kubernetes th·ª±c t·∫ø tr√™n AWS b·∫±ng Amazon EKS. ƒê√¢y l√† b∆∞·ªõc b·∫Øt bu·ªôc ƒë·ªÉ tri·ªÉn khai c√°c bi·ªán ph√°p b·∫£o m·∫≠t container trong c√°c ph·∫ßn sau.\nüéØ M·ª•c ti√™u c·ªßa ch∆∞∆°ng n√†y Trong ch∆∞∆°ng n√†y, b·∫°n s·∫Ω h·ªçc c√°ch t·∫°o m√¥i tr∆∞·ªùng Kubernetes th·ª±c t·∫ø tr√™n AWS b·∫±ng Amazon EKS. ƒê√¢y l√† b∆∞·ªõc b·∫Øt bu·ªôc ƒë·ªÉ tri·ªÉn khai c√°c bi·ªán ph√°p b·∫£o m·∫≠t container trong c√°c ph·∫ßn sau.\nüìö N·ªôi dung ch√≠nh 2.1 T·∫°o EKS Cluster\nH∆∞·ªõng d·∫´n t·ª´ng b∆∞·ªõc t·∫°o m·ªôt cluster EKS b·∫±ng eksctl, bao g·ªìm IAM role, VPC, node group.\n2.2 Tri·ªÉn khai workload m·∫´u\nDeploy m·ªôt ·ª©ng d·ª•ng m·∫´u (nginx + backend) l√™n EKS ƒë·ªÉ l√†m m√¥i tr∆∞·ªùng test cho c√°c lab ti·∫øp theo.\n‚úÖ K·∫øt qu·∫£ sau ch∆∞∆°ng n√†y T·∫°o ƒë∆∞·ª£c 1 cluster Kubernetes th·ª±c t·∫ø ch·∫°y tr√™n AWS C·∫•u h√¨nh ƒë·∫ßy ƒë·ªß quy·ªÅn IAM v√† k·∫øt n·ªëi v·ªõi kubectl Deploy th√†nh c√¥ng ·ª©ng d·ª•ng m·∫´u ƒë·ªÉ d√πng cho c√°c lab b·∫£o m·∫≠t sau üöÄ H√£y b·∫Øt ƒë·∫ßu v·ªõi ph·∫ßn 2.1 ‚Äì T·∫°o EKS Cluster nh√©!\n"},{"uri":"https://tunneeeee.github.io/Internship/vi/5-security-monitoring-and-response/3-penetration-testing/","title":" Ki·ªÉm tra th√¢m nh·∫≠p","tags":[],"description":"","content":"N·ªôi dung ch√≠nh Gi·ªõi thi·ªáu v·ªÅ Penetration Testing Chu·∫©n b·ªã m√¥i tr∆∞·ªùng ki·ªÉm tra Ki·ªÉm tra b·∫£o m·∫≠t Pod v√† Container Ki·ªÉm tra c·∫•u h√¨nh RBAC Ki·ªÉm tra Network Policy S·ª≠ d·ª•ng Kube-Hunter B√°o c√°o v√† kh·∫Øc ph·ª•c Gi·ªõi thi·ªáu Penetration Testing (ki·ªÉm tra th√¢m nh·∫≠p) l√† qu√° tr√¨nh ƒë√°nh gi√° b·∫£o m·∫≠t h·ªá th·ªëng b·∫±ng c√°ch m√¥ ph·ªèng c√°c cu·ªôc t·∫•n c√¥ng th·ª±c t·∫ø. ƒê·ªëi v·ªõi Kubernetes, ch√∫ng ta c·∫ßn ki·ªÉm tra:\nC·∫•u h√¨nh b·∫£o m·∫≠t c·ªßa cluster Quy·ªÅn truy c·∫≠p v√† ph√¢n quy·ªÅn L·ªó h·ªïng trong container image C·∫•u h√¨nh network v√† policy Compliance v·ªõi c√°c chu·∫©n b·∫£o m·∫≠t Chu·∫©n b·ªã m√¥i tr∆∞·ªùng ki·ªÉm tra B∆∞·ªõc 1: T·∫°o namespace ri√™ng cho testing kubectl create namespace pentest kubectl config set-context --current --namespace=pentest B∆∞·ªõc 2: T·∫°o vulnerable pod ƒë·ªÉ test apiVersion: v1 kind: Pod metadata: name: vulnerable-pod namespace: pentest spec: securityContext: runAsUser: 0 runAsGroup: 0 containers: - name: test-container image: nginx:latest securityContext: privileged: true allowPrivilegeEscalation: true capabilities: add: - SYS_ADMIN - NET_ADMIN volumeMounts: - name: host-root mountPath: /host volumes: - name: host-root hostPath: path: / kubectl apply -f vulnerable-pod.yaml Ki·ªÉm tra b·∫£o m·∫≠t Pod v√† Container B∆∞·ªõc 1: Ki·ªÉm tra privilege escalation # Truy c·∫≠p v√†o pod kubectl exec -it vulnerable-pod -- /bin/bash # Ki·ªÉm tra quy·ªÅn root whoami id # Ki·ªÉm tra kh·∫£ nƒÉng truy c·∫≠p host filesystem ls /host cat /host/etc/passwd B∆∞·ªõc 2: Ki·ªÉm tra container breakout # Trong pod, ki·ªÉm tra mount points mount | grep -E \u0026#34;(proc|sys|dev)\u0026#34; # Ki·ªÉm tra capabilities capsh --print # Th·ª≠ escape container chroot /host /bin/bash B∆∞·ªõc 3: T·∫°o pod v·ªõi security context t·ªët h∆°n apiVersion: v1 kind: Pod metadata: name: secure-pod namespace: pentest spec: securityContext: runAsNonRoot: true runAsUser: 1000 fsGroup: 2000 containers: - name: secure-container image: nginx:1.21-alpine securityContext: allowPrivilegeEscalation: false readOnlyRootFilesystem: true capabilities: drop: - ALL resources: limits: memory: \u0026#34;128Mi\u0026#34; cpu: \u0026#34;100m\u0026#34; requests: memory: \u0026#34;64Mi\u0026#34; cpu: \u0026#34;50m\u0026#34; kubectl apply -f secure-pod.yaml Ki·ªÉm tra c·∫•u h√¨nh RBAC B∆∞·ªõc 1: T·∫°o ServiceAccount v·ªõi quy·ªÅn cao apiVersion: v1 kind: ServiceAccount metadata: name: test-sa namespace: pentest --- apiVersion: rbac.authorization.k8s.io/v1 kind: ClusterRoleBinding metadata: name: test-binding roleRef: apiGroup: rbac.authorization.k8s.io kind: ClusterRole name: cluster-admin subjects: - kind: ServiceAccount name: test-sa namespace: pentest kubectl apply -f test-rbac.yaml B∆∞·ªõc 2: Ki·ªÉm tra quy·ªÅn truy c·∫≠p # T·∫°o pod v·ªõi ServiceAccount kubectl run test-rbac --image=bitnami/kubectl:latest \\ --serviceaccount=test-sa \\ --namespace=pentest \\ --rm -it --restart=Never \\ -- /bin/bash # Trong pod, ki·ªÉm tra quy·ªÅn kubectl auth can-i --list kubectl get secrets --all-namespaces kubectl get nodes B∆∞·ªõc 3: Ki·ªÉm tra token ServiceAccount # L·∫•y token kubectl get secret $(kubectl get serviceaccount test-sa -o jsonpath=\u0026#39;{.secrets[0].name}\u0026#39;) -o jsonpath=\u0026#39;{.data.token}\u0026#39; | base64 -d # S·ª≠ d·ª•ng token ƒë·ªÉ truy c·∫≠p API curl -k -H \u0026#34;Authorization: Bearer \u0026lt;TOKEN\u0026gt;\u0026#34; https://\u0026lt;API_SERVER\u0026gt;/api/v1/namespaces Ki·ªÉm tra Network Policy B∆∞·ªõc 1: T·∫°o pod test network apiVersion: v1 kind: Pod metadata: name: network-test-1 namespace: pentest labels: app: test-app spec: containers: - name: test image: busybox command: [\u0026#34;sleep\u0026#34;, \u0026#34;3600\u0026#34;] --- apiVersion: v1 kind: Pod metadata: name: network-test-2 namespace: pentest labels: app: other-app spec: containers: - name: test image: busybox command: [\u0026#34;sleep\u0026#34;, \u0026#34;3600\u0026#34;] kubectl apply -f network-test-pods.yaml B∆∞·ªõc 2: Ki·ªÉm tra k·∫øt n·ªëi tr∆∞·ªõc khi c√≥ policy # L·∫•y IP c·ªßa pod kubectl get pods -o wide # Test k·∫øt n·ªëi kubectl exec network-test-1 -- ping -c 3 \u0026lt;IP_OF_POD_2\u0026gt; kubectl exec network-test-1 -- wget -qO- http://\u0026lt;IP_OF_POD_2\u0026gt;:80 B∆∞·ªõc 3: √Åp d·ª•ng Network Policy apiVersion: networking.k8s.io/v1 kind: NetworkPolicy metadata: name: deny-all namespace: pentest spec: podSelector: {} policyTypes: - Ingress - Egress kubectl apply -f network-policy.yaml B∆∞·ªõc 4: Ki·ªÉm tra l·∫°i k·∫øt n·ªëi # Test k·∫øt n·ªëi sau khi c√≥ policy kubectl exec network-test-1 -- ping -c 3 \u0026lt;IP_OF_POD_2\u0026gt; # K·∫øt qu·∫£: Timeout (b·ªã ch·∫∑n) S·ª≠ d·ª•ng Kube-Hunter B∆∞·ªõc 1: C√†i ƒë·∫∑t Kube-Hunter # Ch·∫°y Kube-Hunter trong container kubectl run kube-hunter --image=aquasec/kube-hunter:latest \\ --namespace=pentest \\ --rm -it --restart=Never \\ -- --remote \u0026lt;CLUSTER_IP\u0026gt; B∆∞·ªõc 2: Ch·∫°y Kube-Hunter t·ª´ b√™n ngo√†i # Tr√™n m√°y local pip install kube-hunter # Scan cluster kube-hunter --remote \u0026lt;CLUSTER_ENDPOINT\u0026gt; B∆∞·ªõc 3: Ph√¢n t√≠ch k·∫øt qu·∫£ Kube-Hunter s·∫Ω b√°o c√°o:\nExposed services Insecure configurations Potential attack vectors Privilege escalation opportunities B√°o c√°o v√† kh·∫Øc ph·ª•c T·ªïng h·ª£p l·ªó h·ªïng ph√°t hi·ªán High Risk:\nPrivileged containers Host filesystem access Cluster-admin permissions Medium Risk:\nLatest image tags Missing resource limits Weak network policies Low Risk:\nMissing security contexts Outdated images Khuy·∫øn ngh·ªã kh·∫Øc ph·ª•c # Pod Security Standards apiVersion: v1 kind: Namespace metadata: name: secure-namespace labels: pod-security.kubernetes.io/enforce: restricted pod-security.kubernetes.io/audit: restricted pod-security.kubernetes.io/warn: restricted kubectl apply -f secure-namespace.yaml Cleanup # X√≥a c√°c t√†i nguy√™n test kubectl delete namespace pentest kubectl delete clusterrolebinding test-binding T·ªïng k·∫øt Workshop üéâ Ch√∫c m·ª´ng! B·∫°n ƒë√£ ho√†n th√†nh workshop \u0026ldquo;Container Security tr√™n AWS EKS\u0026rdquo;\nNh·ªØng g√¨ ƒë√£ h·ªçc:\nThi·∫øt l·∫≠p EKS cluster an to√†n Scanning image v·ªõi Trivy Hardening v·ªõi CIS Benchmark Qu·∫£n l√Ω policy v·ªõi OPA Gatekeeper Monitoring v·ªõi Falco Logging v·ªõi CloudWatch Penetration testing B∆∞·ªõc ti·∫øp theo:\n√Åp d·ª•ng v√†o m√¥i tr∆∞·ªùng production Thi·∫øt l·∫≠p CI/CD pipeline v·ªõi security scanning Monitoring v√† alerting t·ª± ƒë·ªông Compliance v·ªõi c√°c chu·∫©n b·∫£o m·∫≠t ‚úÖ Ghi ch√∫ quan tr·ªçng:\nPenetration testing ch·ªâ n√™n th·ª±c hi·ªán tr√™n m√¥i tr∆∞·ªùng test Lu√¥n c√≥ backup tr∆∞·ªõc khi test Tu√¢n th·ªß c√°c quy ƒë·ªãnh ph√°p l√Ω v·ªÅ security testing B√°o c√°o v√† kh·∫Øc ph·ª•c ngay c√°c l·ªó h·ªïng ph√°t hi·ªán C·∫£m ∆°n b·∫°n ƒë√£ tham gia workshop! üöÄ\n"},{"uri":"https://tunneeeee.github.io/Internship/vi/","title":"C·ªßng c·ªë b·∫£o m·∫≠t Container v√† b·∫£o v·ªá khi ch·∫°y (Runtime Protection)","tags":[],"description":"","content":"üîê Gi·ªõi thi·ªáu Trong ph·∫ßn n√†y, b·∫°n s·∫Ω t√¨m hi·ªÉu c√°ch c·ªßng c·ªë (hardening) m√¥i tr∆∞·ªùng container nh·∫±m gi·∫£m thi·ªÉu r·ªßi ro b·∫£o m·∫≠t, ƒë·ªìng th·ªùi √°p d·ª•ng c√°c k·ªπ thu·∫≠t gi√°m s√°t v√† b·∫£o v·ªá ·ªü th·ªùi ƒëi·ªÉm runtime ƒë·ªÉ ph√°t hi·ªán v√† ph·∫£n ·ª©ng k·ªãp th·ªùi v·ªõi c√°c h√†nh vi b·∫•t th∆∞·ªùng.\nKhi ·ª©ng d·ª•ng ƒë√£ ch·∫°y, container v·∫´n c√≥ th·ªÉ l√† m·ª•c ti√™u t·∫•n c√¥ng n·∫øu kh√¥ng c√≥ l·ªõp b·∫£o v·ªá ph√π h·ª£p. Do ƒë√≥, vi·ªác k·∫øt h·ª£p c·∫£ bi·ªán ph√°p ch·ªß ƒë·ªông (hardening) v√† bi·ªán ph√°p ph·∫£n ·ª©ng (runtime detection) l√† c·ª±c k·ª≥ quan tr·ªçng.\nüß© N·ªôi dung b·∫°n s·∫Ω h·ªçc Nh·ªØng c·∫•u h√¨nh n√™n √°p d·ª•ng ƒë·ªÉ harden container v√† Kubernetes Pod (user, capabilities, readonlyRootFilesystem, seccomp, apparmor‚Ä¶) S·ª≠ d·ª•ng c√¥ng c·ª• nh∆∞ Trivy ƒë·ªÉ ki·ªÉm tra l·ªó h·ªïng tr∆∞·ªõc khi tri·ªÉn khai C√†i ƒë·∫∑t v√† c·∫•u h√¨nh Falco ƒë·ªÉ ph√°t hi·ªán c√°c h√†nh vi b·∫•t th∆∞·ªùng trong container M√¥ ph·ªèng v√† ph√¢n t√≠ch c√°c cu·ªôc t·∫•n c√¥ng th·ªùi gian th·ª±c √Åp d·ª•ng c√°c policy runtime ƒë·ªÉ gi·∫£m thi·ªÉu r·ªßi ro khi container b·ªã khai th√°c üéØ K·∫øt qu·∫£ mong ƒë·ª£i Sau khi ho√†n th√†nh ph·∫ßn n√†y, b·∫°n s·∫Ω:\nBi·∫øt c√°ch thi·∫øt l·∫≠p c·∫•u h√¨nh b·∫£o m·∫≠t chu·∫©n cho container/POD Hi·ªÉu vai tr√≤ c·ªßa c√°c c√¥ng c·ª• gi√°m s√°t v√† ph√°t hi·ªán nh∆∞ Falco C√≥ kh·∫£ nƒÉng tri·ªÉn khai h·ªá th·ªëng b·∫£o v·ªá runtime trong m√¥i tr∆∞·ªùng th·ª±c t·∫ø Nh·∫≠n di·ªán s·ªõm c√°c h√†nh vi ƒë√°ng ng·ªù v√† ƒë∆∞a ra ph·∫£n ·ª©ng ph√π h·ª£p üöÄ H√£y s·∫µn s√†ng c·ªßng c·ªë m√¥i tr∆∞·ªùng container c·ªßa b·∫°n tr∆∞·ªõc c√°c m·ªëi ƒëe do·∫° th·ª±c t·∫ø!\n"},{"uri":"https://tunneeeee.github.io/Internship/vi/4-policy-enforcement-and-runtime-protection/3-automated-remediation/","title":"T·ª± ƒë·ªông ph·∫£n ·ª©ng v·ªõi vi ph·∫°m b·∫±ng Falcosidekick","tags":[],"description":"","content":"N·ªôi dung ch√≠nh Gi·ªõi thi·ªáu Falcosidekick Tri·ªÉn khai Falcosidekick c√πng Falco C·∫•u h√¨nh g·ª≠i c·∫£nh b√°o Ki·ªÉm th·ª≠ c·∫£nh b√°o Gi·ªõi thi·ªáu Falcosidekick Falcosidekick l√† m·ªôt d·ªãch v·ª• h·ªó tr·ª£ Falco g·ª≠i c·∫£nh b√°o ƒë·∫øn c√°c h·ªá th·ªëng b√™n ngo√†i nh∆∞:\nSlack, Discord Email Webhook, Kafka, NATS Prometheus, Grafana, Elasticsearch\u0026hellip; Falcosidekick nh·∫≠n log t·ª´ Falco v√† chuy·ªÉn ti·∫øp theo c·∫•u h√¨nh.\nTri·ªÉn khai Falcosidekick c√πng Falco B∆∞·ªõc 1: C√†i Falco k√®m Falcosidekick helm install falcosidekick falcosecurity/falcosidekick --namespace falco --set config.slack.webhookurl=\u0026#34;https://hooks.slack.com/services/xxx\u0026#34; üîÅ C√≥ th·ªÉ thay Slack b·∫±ng webhook URL kh√°c t√πy nhu c·∫ßu.\nB∆∞·ªõc 2: Ki·ªÉm tra pod ƒë√£ ch·∫°y kubectl get pods -n falco ‚úÖ K·∫øt qu·∫£ mong ƒë·ª£i: C√≥ 2 pod ƒëang ch·∫°y: falco v√† falcosidekick\nC·∫•u h√¨nh g·ª≠i c·∫£nh b√°o B·∫°n c√≥ th·ªÉ ch·ªânh s·ª≠a th√™m trong file values.yaml n·∫øu mu·ªën c·∫•u h√¨nh nhi·ªÅu h·ªá th·ªëng c·∫£nh b√°o.\nV√≠ d·ª•: G·ª≠i v·ªÅ Discord, Prometheus, Webhook\u0026hellip;\nfalcosidekick: config: discord: webhookurl: \u0026#34;https://discord.com/api/webhooks/xxx\u0026#34; webhook: address: \u0026#34;http://your-api-endpoint\u0026#34; Sau ƒë√≥ n√¢ng c·∫•p chart:\nhelm upgrade falco falcosecurity/falco -n falco -f values.yaml Ki·ªÉm th·ª≠ c·∫£nh b√°o G√¢y s·ª± ki·ªán b·∫•t th∆∞·ªùng kubectl run -i --tty attacker --image=alpine -- sh Sau ƒë√≥ ch·∫°y:\ntouch /etc/passwd Ki·ªÉm tra alert g·ª≠i ƒëi Ki·ªÉm tra log Falcosidekick: kubectl logs -l app=falcosidekick -n falco Xem th√¥ng b√°o tr√™n Slack/Discord/Webhook t√πy theo c·∫•u h√¨nh. üì∏ Ch·ª•p ·∫£nh minh h·ªça alert nh·∫≠n ƒë∆∞·ª£c ·ªü Slack ho·∫∑c Discord ƒë·ªÉ ƒë∆∞a v√†o t√†i li·ªáu.\nGhi ch√∫ Falcosidekick gi√∫p t√≠ch h·ª£p Falco v·ªõi nhi·ªÅu h·ªá th·ªëng alerting kh√°c nhau. C√≥ th·ªÉ m·ªü r·ªông g·ª≠i alert ƒë·∫øn SIEM, h·ªá th·ªëng automation (XDR, SOAR). "},{"uri":"https://tunneeeee.github.io/Internship/vi/3-container-security-hardening/3-network-policy/","title":"√Åp d·ª•ng NetworkPolicy trong Kubernetes","tags":[],"description":"","content":" N·ªôi dung ch√≠nh Gi·ªõi thi·ªáu v·ªÅ NetworkPolicy T·∫°o namespace v√† Pod m·∫´u T·∫°o v√† √°p d·ª•ng NetworkPolicy Ki·ªÉm tra k·∫øt qu·∫£ √°p d·ª•ng Gi·ªõi thi·ªáu v·ªÅ NetworkPolicy NetworkPolicy l√† t√≠nh nƒÉng c·ªßa Kubernetes gi√∫p b·∫°n ki·ªÉm so√°t l∆∞u l∆∞·ª£ng m·∫°ng v√†o/ra gi·ªØa c√°c Pod.\nM·∫∑c ƒë·ªãnh, m·ªçi Pod trong m·ªôt cluster c√≥ th·ªÉ giao ti·∫øp v·ªõi nhau. Khi √°p d·ª•ng NetworkPolicy, b·∫°n c√≥ th·ªÉ ch·∫∑n m·ªçi traffic v√† ch·ªâ cho ph√©p m·ªôt s·ªë k·∫øt n·ªëi c·ª• th·ªÉ.\nT·∫°o namespace v√† Pod m·∫´u B∆∞·ªõc 1: T·∫°o namespace ri√™ng kubectl create ns secure-ns B∆∞·ªõc 2: T·∫°o Pod m·∫´u (nginx) kubectl run nginx --image=nginx -n secure-ns --expose --port=80 üìå Ghi ch√∫: --expose s·∫Ω t·ª± t·∫°o service ƒë·ªÉ b·∫°n d·ªÖ test truy c·∫≠p.\nT·∫°o v√† √°p d·ª•ng NetworkPolicy B∆∞·ªõc 3: T·∫°o file deny-all.yaml apiVersion: networking.k8s.io/v1 kind: NetworkPolicy metadata: name: deny-all namespace: secure-ns spec: podSelector: {} policyTypes: - Ingress L·ªánh √°p d·ª•ng:\nkubectl apply -f deny-all.yaml B∆∞·ªõc 4: T·∫°o m·ªôt Pod test b√™n ngo√†i kubectl run busybox --image=busybox:1.28 --rm -it --restart=Never -- sh Th·ª≠ wget v√†o nginx service:\nwget -qO- nginx.secure-ns.svc.cluster.local ‚ùå K·∫øt qu·∫£ s·∫Ω kh√¥ng truy c·∫≠p ƒë∆∞·ª£c ‚Äî ƒë√£ b·ªã ch·∫∑n b·ªüi NetworkPolicy.\nKi·ªÉm tra k·∫øt qu·∫£ √°p d·ª•ng B·∫°n c√≥ th·ªÉ th·ª≠ th√™m c√°c NetworkPolicy cho ph√©p m·ªôt s·ªë IP ho·∫∑c namespace c·ª• th·ªÉ, v√≠ d·ª•:\napiVersion: networking.k8s.io/v1 kind: NetworkPolicy metadata: name: allow-same-ns namespace: secure-ns spec: podSelector: matchLabels: run: nginx ingress: - from: - podSelector: {} Sau ƒë√≥ th·ª≠ truy c·∫≠p l·∫°i t·ª´ Pod trong c√πng namespace.\n‚úÖ N·∫øu th√†nh c√¥ng ‚Üí b·∫°n ƒë√£ ki·ªÉm so√°t ƒë∆∞·ª£c traffic ƒë√∫ng nh∆∞ mong mu·ªën.\nGhi ch√∫ b·ªï sung ƒê·∫£m b·∫£o cluster ƒë√£ b·∫≠t CNI plugin h·ªó tr·ª£ NetworkPolicy (Amazon EKS h·ªó tr·ª£ s·∫µn) S·ª≠ d·ª•ng th√™m c√¥ng c·ª• nh∆∞ Calico n·∫øu c·∫ßn advanced policy √Åp d·ª•ng NetworkPolicy l√† b∆∞·ªõc quan tr·ªçng trong m√¥ h√¨nh Zero Trust cho Kubernetes "},{"uri":"https://tunneeeee.github.io/Internship/vi/3-container-security-hardening/","title":"TƒÉng c∆∞·ªùng an ninh Container","tags":[],"description":"","content":" T·ªïng quan Ph·∫ßn n√†y t·∫≠p trung v√†o c√°c bi·ªán ph√°p tƒÉng c∆∞·ªùng b·∫£o m·∫≠t container ·ªü t·∫ßng c∆° b·∫£n nh·∫•t g·ªìm:\nQu√©t l·ªó h·ªïng container image (Trivy) Ki·ªÉm tra tu√¢n th·ªß chu·∫©n b·∫£o m·∫≠t (CIS Benchmark v·ªõi kube-bench) √Åp d·ª•ng ch√≠nh s√°ch m·∫°ng ƒë·ªÉ gi·ªõi h·∫°n traffic gi·ªØa c√°c Pod (Kubernetes NetworkPolicy) "},{"uri":"https://tunneeeee.github.io/Internship/vi/4-policy-enforcement-and-runtime-protection/","title":"Policy Enforcement &amp; Runtime Protection","tags":[],"description":"","content":"Overview | T·ªïng quan This section focuses on advanced container security techniques, specifically:\nPh·∫ßn n√†y t·∫≠p trung v√†o c√°c k·ªπ thu·∫≠t b·∫£o m·∫≠t container n√¢ng cao, c·ª• th·ªÉ:\nEnforcing runtime behavior using Falco to detect suspicious activity\n√Åp d·ª•ng gi√°m s√°t h√†nh vi th·ªùi gian th·ª±c b·∫±ng Falco ƒë·ªÉ ph√°t hi·ªán c√°c ho·∫°t ƒë·ªông b·∫•t th∆∞·ªùng\nImplementing Policy-as-Code with Open Policy Agent (OPA) to control deployment and access\nTri·ªÉn khai ch√≠nh s√°ch d∆∞·ªõi d·∫°ng m√£ (Policy-as-Code) b·∫±ng Open Policy Agent (OPA) ƒë·ªÉ ki·ªÉm so√°t vi·ªác tri·ªÉn khai v√† truy c·∫≠p\nCombining runtime detection and policy enforcement for proactive defense\nK·∫øt h·ª£p ph√°t hi·ªán th·ªùi gian th·ª±c v√† th·ª±c thi ch√≠nh s√°ch ƒë·ªÉ b·∫£o v·ªá ch·ªß ƒë·ªông\n"},{"uri":"https://tunneeeee.github.io/Internship/vi/5-security-monitoring-and-response/","title":"Gi√°m s√°t &amp; Ph·∫£n h·ªìi B·∫£o m·∫≠t","tags":[],"description":"","content":"T·ªïng quan Gi√°m s√°t b·∫£o m·∫≠t v√† ph·∫£n h·ªìi s·ª± c·ªë l√† c√°c th√†nh ph·∫ßn thi·∫øt y·∫øu ƒë·ªÉ b·∫£o v·ªá h·ªá th·ªëng container trong m√¥i tr∆∞·ªùng th·ª±c t·∫ø. Ph·∫ßn n√†y s·∫Ω h∆∞·ªõng d·∫´n b·∫°n c√°ch ghi log, gi√°m s√°t c√°c ch·ªâ s·ªë an to√†n v√† th·ª≠ nghi·ªám t·∫•n c√¥ng ƒë·ªÉ tƒÉng kh·∫£ nƒÉng ph√°t hi·ªán v√† ph·∫£n ·ª©ng k·ªãp th·ªùi v·ªõi c√°c m·ªëi ƒëe d·ªça.\nB·∫°n s·∫Ω h·ªçc c√°ch:\nThu th·∫≠p v√† ph√¢n t√≠ch log t·ª´ workload s·ª≠ d·ª•ng CloudWatch Logging. X√¢y d·ª±ng Dashboard b·∫£o m·∫≠t ƒë·ªÉ theo d√µi th·ªùi gian th·ª±c c√°c ch·ªâ s·ªë v√† d·∫•u hi·ªáu t·∫•n c√¥ng. Ti·∫øn h√†nh Penetration Testing (ki·ªÉm th·ª≠ x√¢m nh·∫≠p) ƒë·ªÉ ƒë√°nh gi√° nƒÉng l·ª±c ph√≤ng th·ªß c·ªßa h·ªá th·ªëng. "},{"uri":"https://tunneeeee.github.io/Internship/vi/categories/","title":"Categories","tags":[],"description":"","content":""},{"uri":"https://tunneeeee.github.io/Internship/vi/tags/","title":"Tags","tags":[],"description":"","content":""}]